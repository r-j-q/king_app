/**
 *  =================================================================
 * aegis-web-sdk@1.36.5 (c) 2022 TencentCloud Real User Monitoring.
 * Author pumpkincai.
 * Last Release Time Thu Nov 24 2022 16:10:40 GMT+0800 (中国标准时间).
 * Released under the MIT License.
 * Thanks for supporting RUM & Aegis!
 * =================================================================
 **/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Aegis=t()}(this,function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){throw t!==undefined&&null!==t||n.path,new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},n.exports),n.exports}var o,i,U,c,D,v=(U=function(e){return e&&e.Math==Math&&e})("object"==typeof globalThis&&globalThis)||U("object"==typeof window&&window)||U("object"==typeof self&&self)||U("object"==typeof e&&e)||function(){return this}()||Function("return this")(),d=!(c=function(e){try{return!!e()}catch(t){return!0}})(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),M=!c(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),F=Function.prototype.call,m=M?F.bind(F):function(){return F.apply(F,arguments)},e={}.propertyIsEnumerable,H={f:(D=Object.getOwnPropertyDescriptor)&&!e.call({1:2},1)?function(e){e=D(this,e);return!!e&&e.enumerable}:e},q=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},e=Function.prototype,B=e.bind,W=e.call,X=M&&B.bind(W,W),s=M?function(e){return e&&X(e)}:function(e){return e&&function(){return W.apply(e,arguments)}},$=s({}.toString),G=s("".slice),V=function(e){return G($(e),8,-1)},J=Object,K=s("".split),z=c(function(){return!J("z").propertyIsEnumerable(0)})?function(e){return"String"==V(e)?K(e,""):J(e)}:J,Y=function(e){return null===e||e===undefined},Q=TypeError,Z=function(e){if(Y(e))throw Q("Can't call method on "+e);return e},ee=function(e){return z(Z(e))},e="object"==typeof document&&document.all,B={all:e,IS_HTMLDDA:void 0===e&&e!==undefined},te=B.all,O=B.IS_HTMLDDA?function(e){return"function"==typeof e||e===te}:function(e){return"function"==typeof e},ne=B.all,l=B.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:O(e)||e===ne}:function(e){return"object"==typeof e?null!==e:O(e)},re=function(e,t){return arguments.length<2?(n=v[e],O(n)?n:undefined):v[e]&&v[e][t];var n},oe=s({}.isPrototypeOf),e=re("navigator","userAgent")||"",B=v.process,ie=v.Deno,B=B&&B.versions||ie&&ie.version,ie=B&&B.v8,ae=i=!(i=ie?0<(o=ie.split("."))[0]&&o[0]<4?1:+(o[0]+o[1]):i)&&e&&(!(o=e.match(/Edge\/(\d+)/))||74<=o[1])&&(o=e.match(/Chrome\/(\d+)/))?+o[1]:i,ue=!!Object.getOwnPropertySymbols&&!c(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ae&&ae<41}),ce=ue&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,se=Object,fe=ce?function(e){return"symbol"==typeof e}:function(e){var t=re("Symbol");return O(t)&&oe(t.prototype,se(e))},le=String,de=function(e){try{return le(e)}catch(t){return"Object"}},pe=TypeError,he=function(e){if(O(e))return e;throw pe(de(e)+" is not a function")},ge=function(e,t){t=e[t];return Y(t)?undefined:he(t)},ye=TypeError,ve=Object.defineProperty,me=function(e,t){try{ve(v,e,{value:t,configurable:!0,writable:!0})}catch(o){v[e]=t}return t},be=v["__core-js_shared__"]||me("__core-js_shared__",{}),B=t(function(e){(e.exports=function(e,t){return be[e]||(be[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.25.2",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.2/LICENSE",source:"https://github.com/zloirock/core-js"})}),we=Object,Ee=function(e){return we(Z(e))},Oe=s({}.hasOwnProperty),b=Object.hasOwn||function(e,t){return Oe(Ee(e),t)},Re=0,Se=Math.random(),xe=s(1..toString),Te=function(e){return"Symbol("+(e===undefined?"":e)+")_"+xe(++Re+Se,36)},Pe=B("wks"),Ie=v.Symbol,Le=Ie&&Ie["for"],Ce=ce?Ie:Ie&&Ie.withoutSetter||Te,f=function(e){var t;return b(Pe,e)&&(ue||"string"==typeof Pe[e])||(t="Symbol."+e,ue&&b(Ie,e)?Pe[e]=Ie[e]:Pe[e]=(ce&&Le?Le:Ce)(t)),Pe[e]},Ae=TypeError,je=f("toPrimitive"),ke=function(e,t){if(!l(e)||fe(e))return e;var n,r,o=ge(e,je);if(o){if(t===undefined&&(t="default"),o=m(o,e,t),!l(o)||fe(o))return o;throw Ae("Can't convert object to primitive value")}t===undefined&&(t="number");o=e,e=t;if("string"===e&&O(n=o.toString)&&!l(r=m(n,o)))return r;if(O(n=o.valueOf)&&!l(r=m(n,o)))return r;if("string"!==e&&O(n=o.toString)&&!l(r=m(n,o)))return r;throw ye("Can't convert object to primitive value")},Ne=function(e){e=ke(e,"string");return fe(e)?e:e+""},_e=v.document,Ue=l(_e)&&l(_e.createElement),De=function(e){return Ue?_e.createElement(e):{}},Me=!d&&!c(function(){return 7!=Object.defineProperty(De("div"),"a",{get:function(){return 7}}).a}),Fe=Object.getOwnPropertyDescriptor,He={f:d?Fe:function(e,t){if(e=ee(e),t=Ne(t),Me)try{return Fe(e,t)}catch(o){}if(b(e,t))return q(!m(H.f,e,t),e[t])}},ie=d&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),qe=String,Be=TypeError,R=function(e){if(l(e))return e;throw Be(qe(e)+" is not an object")},We=TypeError,Xe=Object.defineProperty,$e=Object.getOwnPropertyDescriptor,Ge={f:d?ie?function(e,t,n){var r;return R(e),t=Ne(t),R(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable&&(r=$e(e,t))&&r.writable&&(e[t]=n.value,n={configurable:("configurable"in n?n:r).configurable,enumerable:("enumerable"in n?n:r).enumerable,writable:!1}),Xe(e,t,n)}:Xe:function(e,t,n){if(R(e),t=Ne(t),R(n),Me)try{return Xe(e,t,n)}catch(i){}if("get"in n||"set"in n)throw We("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ve=d?function(e,t,n){return Ge.f(e,t,q(1,n))}:function(e,t,n){return e[t]=n,e},n=Function.prototype,r=d&&Object.getOwnPropertyDescriptor,a=b(n,"name"),Je={EXISTS:a,PROPER:a&&"something"===function(){}.name,CONFIGURABLE:a&&(!d||r(n,"name").configurable)},Ke=s(Function.toString);O(be.inspectSource)||(be.inspectSource=function(e){return Ke(e)});var ze,Ye,Qe,Ze,et,tt,nt,rt,ot=be.inspectSource,a=v.WeakMap,n=O(a)&&/native code/.test(String(a)),it=B("keys"),r=function(e){return it[e]||(it[e]=Te(e))},at={},ut=v.TypeError,a=v.WeakMap,ct=(nt=n||be.state?(ze=be.state||(be.state=new a),Ye=s(ze.get),Qe=s(ze.has),Ze=s(ze.set),et=function(e,t){if(Qe(ze,e))throw ut("Object already initialized");return t.facade=e,Ze(ze,e,t),t},tt=function(e){return Ye(ze,e)||{}},function(e){return Qe(ze,e)}):(rt=r("state"),at[rt]=!0,et=function(e,t){if(b(e,rt))throw ut("Object already initialized");return t.facade=e,Ve(e,rt,t),t},tt=function(e){return b(e,rt)?e[rt]:{}},function(e){return b(e,rt)}),{set:et,get:tt,has:nt,enforce:function(e){return nt(e)?tt(e):et(e,{})},getterFor:function(t){return function(e){if(l(e)&&(e=tt(e)).type===t)return e;throw ut("Incompatible receiver, "+t+" required")}}}),st=t(function(e){var r=Je.CONFIGURABLE,o=ct.enforce,t=ct.get,i=Object.defineProperty,a=d&&!c(function(){return 8!==i(function(){},"length",{value:8}).length}),u=String(String).split("String"),e=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!b(e,"name")||r&&e.name!==t)&&(d?i(e,"name",{value:t,configurable:!0}):e.name=t),a&&n&&b(n,"arity")&&e.length!==n.arity&&i(e,"length",{value:n.arity});try{n&&b(n,"constructor")&&n.constructor?d&&i(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=undefined)}catch(m){}n=o(e);return b(n,"source")||(n.source=u.join("string"==typeof t?t:"")),e};Function.prototype.toString=e(function(){return O(this)&&t(this).source||ot(this)},"toString")}),ft=function(e,t,n,r){var o=(r=r||{}).enumerable,i=r.name!==undefined?r.name:t;if(O(n)&&st(n,i,r),r.global)o?e[t]=n:me(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(c){}o?e[t]=n:Ge.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},lt=Math.ceil,dt=Math.floor,pt=Math.trunc||function(e){e=+e;return(0<e?dt:lt)(e)},ht=function(e){e=+e;return e!=e||0==e?0:pt(e)},gt=Math.max,yt=Math.min,vt=function(e,t){e=ht(e);return e<0?gt(e+t,0):yt(e,t)},mt=Math.min,bt=function(e){return 0<e?mt(ht(e),9007199254740991):0},wt=function(e){return bt(e.length)},n=function(u){return function(e,t,n){var r,o=ee(e),i=wt(o),a=vt(n,i);if(u&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((u||a in o)&&o[a]===t)return u||a||0;return!u&&-1}},a={includes:n(!0),indexOf:n(!1)},Et=a.indexOf,Ot=s([].push),Rt=function(e,t){var n,r=ee(e),o=0,i=[];for(n in r)!b(at,n)&&b(r,n)&&Ot(i,n);for(;t.length>o;)!b(r,n=t[o++])||~Et(i,n)||Ot(i,n);return i},St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xt=St.concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(e){return Rt(e,xt)}},Pt={f:Object.getOwnPropertySymbols},It=s([].concat),Lt=re("Reflect","ownKeys")||function(e){var t=Tt.f(R(e)),n=Pt.f;return n?It(t,n(e)):t},Ct=/#|\.prototype\./,n=function(e,t){e=jt[At(e)];return e==Nt||e!=kt&&(O(t)?c(t):!!t)},At=n.normalize=function(e){return String(e).replace(Ct,".").toLowerCase()},jt=n.data={},kt=n.NATIVE="N",Nt=n.POLYFILL="P",_t=n,Ut=He.f,g=function(e,t){var n,r,o,i,a=e.target,u=e.global,c=e.stat;if(n=u?v:c?v[a]||me(a,{}):(v[a]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(i=Ut(n,r))&&i.value:n[r],!_t(u?r:a+(c?".":"#")+r,e.forced)&&i!==undefined){if(typeof o==typeof i)continue;for(var s=o,f=i,l=y=g=h=p=d=void 0,d=Lt(f),p=Ge.f,h=He.f,g=0;g<d.length;g++){var y=d[g];b(s,y)||l&&b(l,y)||p(s,y,h(f,y))}}(e.sham||i&&i.sham)&&Ve(o,"sham",!0),ft(n,r,o,e)}},Dt=s(s.bind),Mt=function(e,t){return he(e),t===undefined?e:M?Dt(e,t):function(){return e.apply(t,arguments)}},Ft=Array.isArray||function(e){return"Array"==V(e)},n={},n=(n[f("toStringTag")]="z","[object z]"===String(n)),Ht=f("toStringTag"),qt=Object,Bt="Arguments"==V(function(){return arguments}()),Wt=n?V:function(e){var n,t;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(e=qt(e),Ht))?n:Bt?V(e):"Object"==(t=V(e))&&O(e.callee)?"Arguments":t},Xt=function(){},$t=[],Gt=re("Reflect","construct"),Vt=/^\s*(?:class|function)\b/,Jt=s(Vt.exec),Kt=!Vt.exec(Xt),zt=function(e){if(!O(e))return!1;try{return Gt(Xt,$t,e),!0}catch(t){return!1}},u=function(e){if(!O(e))return!1;switch(Wt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Kt||!!Jt(Vt,ot(e))}catch(t){return!0}};u.sham=!0;var Yt,Qt=!Gt||c(function(){var e;return zt(zt.call)||!zt(Object)||!zt(function(){e=!0})||e})?u:zt,Zt=f("species"),en=Array,tn=function(e,t){return Ft(e=e)&&(n=e.constructor,(Qt(n)&&(n===en||Ft(n.prototype))||l(n)&&null===(n=n[Zt]))&&(n=undefined)),new(n===undefined?en:n)(0===t?0:t);var n},nn=s([].push),u=function(d){var p=1==d,h=2==d,g=3==d,y=4==d,v=6==d,m=7==d,b=5==d||v;return function(e,t,n,r){for(var o,i,a=Ee(e),u=z(a),c=Mt(t,n),s=wt(u),f=0,t=r||tn,l=p?t(e,s):h||m?t(e,0):undefined;f<s;f++)if((b||f in u)&&(i=c(o=u[f],f,a),d))if(p)l[f]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return f;case 2:nn(l,o)}else switch(d){case 4:return!1;case 7:nn(l,o)}return v?-1:g||y?y:l}},u={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)},rn=Object.keys||function(e){return Rt(e,St)},on={f:d&&!ie?Object.defineProperties:function(e,t){R(e);for(var n,r=ee(t),o=rn(t),i=o.length,a=0;a<i;)Ge.f(e,n=o[a++],r[n]);return e}},an=re("document","documentElement"),un=r("IE_PROTO"),cn=function(){},sn=function(e){return"<script>"+e+"<\/script>"},fn=function(e){e.write(sn("")),e.close();var t=e.parentWindow.Object;return e=null,t},ln=function(){try{Yt=new ActiveXObject("htmlfile")}catch(i){}var e;ln="undefined"==typeof document||document.domain&&Yt?fn(Yt):((e=De("iframe")).style.display="none",an.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(sn("document.F=Object")),e.close(),e.F);for(var t=St.length;t--;)delete ln.prototype[St[t]];return ln()},dn=(at[un]=!0,Object.create||function(e,t){var n;return null!==e?(cn.prototype=R(e),n=new cn,cn.prototype=null,n[un]=e):n=ln(),t===undefined?n:on.f(n,t)}),ie=Ge.f,pn=f("unscopables"),hn=Array.prototype,ie=(hn[pn]==undefined&&ie(hn,pn,{configurable:!0,value:dn(null)}),function(e){hn[pn][e]=!0}),gn=u.find,yn=!0,p=("find"in[]&&Array(1).find(function(){yn=!1}),g({target:"Array",proto:!0,forced:yn},{find:function(e){return gn(this,e,1<arguments.length?arguments[1]:undefined)}}),ie("find"),n?{}.toString:function(){return"[object "+Wt(this)+"]"}),n=(n||ft(Object.prototype,"toString",p,{unsafe:!0}),Ge.f);g({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!d},{defineProperty:n});var vn=String,S=function(e){if("Symbol"===Wt(e))throw TypeError("Cannot convert a Symbol value to a string");return vn(e)},mn=f("match"),bn=TypeError,wn=f("match"),p=He.f,En=s("".startsWith),On=s("".slice),Rn=Math.min,n=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[wn]=!1,"/./"[e](t)}catch(i){}}return!1}("startsWith"),p=!(n||(!(p=p(String.prototype,"startsWith"))||p.writable));g({target:"String",proto:!0,forced:!p&&!n},{startsWith:function(e){var t=S(Z(this)),n=e;if(l(n=n)&&((r=n[mn])!==undefined?r:"RegExp"==V(n)))throw bn("The method doesn't accept regular expressions");var r=bt(Rn(1<arguments.length?arguments[1]:undefined,t.length)),n=S(e);return En?En(t,n,r):On(t,r,r+n.length)===n}});var Sn,xn={},p=!c(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Tn=r("IE_PROTO"),Pn=Object,In=Pn.prototype,Ln=p?Pn.getPrototypeOf:function(e){var t,e=Ee(e);return b(e,Tn)?e[Tn]:(t=e.constructor,O(t)&&e instanceof t?t.prototype:e instanceof Pn?In:null)},Cn=f("iterator"),n=!1,r=([].keys&&("next"in(r=[].keys())?(r=Ln(Ln(r)))!==Object.prototype&&(Sn=r):n=!0),l(Sn)&&!c(function(){var e={};return Sn[Cn].call(e)!==e})||(Sn={}),O(Sn[Cn])||ft(Sn,Cn,function(){return this}),{IteratorPrototype:Sn,BUGGY_SAFARI_ITERATORS:n}),An=Ge.f,jn=f("toStringTag"),kn=function(e,t,n){(e=e&&!n?e.prototype:e)&&!b(e,jn)&&An(e,jn,{configurable:!0,value:t})},Nn=r.IteratorPrototype,_n=function(){return this},Un=String,Dn=TypeError,Mn=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,e={};try{(r=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),o=e instanceof Array}catch(i){}return function(e,t){R(e);var n=t;if("object"==typeof n||O(n))return o?r(e,t):e.__proto__=t,e;throw Dn("Can't set "+Un(n)+" as a prototype")}}():undefined),Fn=Je.PROPER,Hn=Je.CONFIGURABLE,qn=r.IteratorPrototype,Bn=r.BUGGY_SAFARI_ITERATORS,Wn=f("iterator"),Xn=function(){return this},n=function(e,t,n,r,o,i,a){h=t+" Iterator",(s=n).prototype=dn(Nn,{next:q(1,r)}),kn(s,h,!1),xn[h]=_n;var u,c,r=function(e){if(e===o&&p)return p;if(!Bn&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},s=t+" Iterator",f=!1,l=e.prototype,d=l[Wn]||l["@@iterator"]||o&&l[o],p=!Bn&&d||r(o),h="Array"==t&&l.entries||d;if(h&&(e=Ln(h.call(new e)))!==Object.prototype&&e.next&&(Ln(e)!==qn&&(Mn?Mn(e,qn):O(e[Wn])||ft(e,Wn,Xn)),kn(e,s,!0)),Fn&&"values"==o&&d&&"values"!==d.name&&(Hn?Ve(l,"name","values"):(f=!0,p=function(){return m(d,this)})),o)if(u={values:r("values"),keys:i?p:r("keys"),entries:r("entries")},a)for(c in u)!Bn&&!f&&c in l||ft(l,c,u[c]);else g({target:t,proto:!0,forced:Bn||f},u);return l[Wn]!==p&&ft(l,Wn,p,{name:o}),xn[t]=p,u},$n=function(e,t){return{value:e,done:t}},r=Ge.f,Gn=ct.set,Vn=ct.getterFor("Array Iterator"),Jn=n(Array,"Array",function(e,t){Gn(this,{type:"Array Iterator",target:ee(e),index:0,kind:t})},function(){var e=Vn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,$n(undefined,!0)):$n("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)},"values"),h=xn.Arguments=xn.Array;if(ie("keys"),ie("values"),ie("entries"),d&&"values"!==h.name)try{r(h,"name",{value:"values"})}catch(_){}var Kn=s("".charAt),zn=s("".charCodeAt),Yn=s("".slice),h=function(o){return function(e,t){var n,e=S(Z(e)),t=ht(t),r=e.length;return t<0||r<=t?o?"":undefined:(n=zn(e,t))<55296||56319<n||t+1===r||(r=zn(e,t+1))<56320||57343<r?o?Kn(e,t):n:o?Yn(e,t,t+2):r-56320+(n-55296<<10)+65536}},r={codeAt:h(!1),charAt:h(!0)},Qn=r.charAt,Zn=ct.set,er=ct.getterFor("String Iterator"),tr=(n(String,"String",function(e){Zn(this,{type:"String Iterator",string:S(e),index:0})},function(){var e=er(this),t=e.string,n=e.index;return n>=t.length?$n(undefined,!0):(t=Qn(t,n),e.index+=t.length,$n(t,!1))}),function(e,t,n){t=Ne(t);t in e?Ge.f(e,t,q(0,n)):e[t]=n}),nr=Array,rr=Math.max,or=Tt.f,ir="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ar={f:function(e){if(!ir||"Window"!=V(e))return or(ee(e));try{return or(e)}catch(_){for(var t=ir,e=wt(t),n=vt(void 0,e),r=vt(void 0===undefined?e:void 0,e),o=nr(rr(r-n,0)),i=0;n<r;n++,i++)tr(o,i,t[n]);return o.length=i,o}}},ur=c(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))}),cr=Object.isExtensible,sr=c(function(){cr(1)})||ur?function(e){return!!l(e)&&(!ur||"ArrayBuffer"!=V(e))&&(!cr||cr(e))}:cr,fr=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),h=t(function(e){var t=Ge.f,n=!1,a=Te("meta"),r=0,o=function(e){t(e,a,{value:{objectID:"O"+r++,weakData:{}}})},u=e.exports={enable:function(){u.enable=function(){},n=!0;var o=Tt.f,i=s([].splice),e={};e[a]=1,o(e).length&&(Tt.f=function(e){for(var t=o(e),n=0,r=t.length;n<r;n++)if(t[n]===a){i(t,n,1);break}return t},g({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ar.f}))},fastKey:function(e,t){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!b(e,a)){if(!sr(e))return"F";if(!t)return"E";o(e)}return e[a].objectID},getWeakData:function(e,t){if(!b(e,a)){if(!sr(e))return!0;if(!t)return!1;o(e)}return e[a].weakData},onFreeze:function(e){return fr&&n&&sr(e)&&!b(e,a)&&o(e),e}};at[a]=!0}),lr=f("iterator"),dr=Array.prototype,pr=f("iterator"),hr=function(e){if(!Y(e))return ge(e,pr)||ge(e,"@@iterator")||xn[Wt(e)]},gr=TypeError,yr=function(e,t,n){var r,o;R(e);try{if(!(r=ge(e,"return"))){if("throw"===t)throw n;return n}r=m(r,e)}catch(_){o=!0,r=_}if("throw"===t)throw n;if(o)throw r;return R(r),n},vr=TypeError,mr=function(e,t){this.stopped=e,this.result=t},br=mr.prototype,wr=function(e,t,n){var r,o,i,a,u,c,s=n&&n.that,f=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=Mt(t,s),g=function(e){return r&&yr(r,"normal",e),new mr(!0,e)},y=function(e){return f?(R(e),p?h(e[0],e[1],g):h(e[0],e[1])):p?h(e,g):h(e)};if(l)r=e.iterator;else if(d)r=e;else{if(!(n=hr(e)))throw vr(de(e)+" is not iterable");if(n!==undefined&&(xn.Array===n||dr[lr]===n)){for(o=0,i=wt(e);o<i;o++)if((a=y(e[o]))&&oe(br,a))return a;return new mr(!1)}r=function(e,t){t=arguments.length<2?hr(e):t;if(he(t))return R(m(t,e));throw gr(de(e)+" is not iterable")}(e,n)}for(u=(l?e:r).next;!(c=m(u,r)).done;){try{a=y(c.value)}catch(_){yr(r,"throw",_)}if("object"==typeof a&&a&&oe(br,a))return a}return new mr(!1)},Er=TypeError,Or=function(e,t){if(oe(t,e))return e;throw Er("Incorrect invocation")},Rr=f("iterator"),Sr=!1;try{var xr=0,Tr={next:function(){return{done:!!xr++}},"return":function(){Sr=!0}};Tr[Rr]=function(){return this},Array.from(Tr,function(){throw 2})}catch(_){}var Pr,Ir,Lr,Cr,Ar,jr,kr,Nr,n=function(e,t){if(!t&&!Sr)return!1;var n=!1;try{var r={};r[Rr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(_){}return n},_r=function(e,t,n){return Mn&&O(t=t.constructor)&&t!==n&&l(t=t.prototype)&&t!==n.prototype&&Mn(e,t),e},Ur=function(e,t,n){for(var r in t)ft(e,r,t[r],n);return e},Dr=h.getWeakData,Mr=ct.set,Fr=ct.getterFor,Hr=u.find,qr=u.findIndex,Br=s([].splice),Wr=0,Xr=function(e){return e.frozen||(e.frozen=new $r)},$r=function(){this.entries=[]},Gr=function(e,t){return Hr(e.entries,function(e){return e[0]===t})},Vr=($r.prototype={get:function(e){e=Gr(this,e);if(e)return e[1]},has:function(e){return!!Gr(this,e)},set:function(e,t){var n=Gr(this,e);n?n[1]=t:this.entries.push([e,t])},"delete":function(t){var e=qr(this.entries,function(e){return e[0]===t});return~e&&Br(this.entries,e,1),!!~e}},Tr=function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}},po={getConstructor:function(e,n,r,o){var e=e(function(e,t){Or(e,i),Mr(e,{type:n,id:Wr++,frozen:undefined}),Y(t)||wr(t,e[o],{that:e,AS_ENTRIES:r})}),i=e.prototype,a=Fr(n),u=function(e,t,n){var r=a(e),o=Dr(R(t),!0);return!0===o?Xr(r).set(t,n):o[r.id]=n,e};return Ur(i,{"delete":function(e){var t,n=a(this);return!!l(e)&&(!0===(t=Dr(e))?Xr(n)["delete"](e):t&&b(t,n.id)&&delete t[n.id])},has:function(e){var t,n=a(this);return!!l(e)&&(!0===(t=Dr(e))?Xr(n).has(e):t&&b(t,n.id))}}),Ur(i,r?{get:function(e){var t,n=a(this);if(l(e))return!0===(t=Dr(e))?Xr(n).get(e):t?t[n.id]:undefined},set:function(e,t){return u(this,e,t)}}:{add:function(e){return u(this,e,!0)}}),e}},Ir=-1!==(w="WeakSet").indexOf("Map"),Lr=-1!==w.indexOf("Weak"),Cr=Ir?"set":"add",Ar=v[w],jr=Ar&&Ar.prototype,y={},co=function(e){var n=s(jr[e]);ft(jr,e,"add"==e?function(e){return n(this,0===e?0:e),this}:"delete"==e?function(e){return!(Lr&&!l(e))&&n(this,0===e?0:e)}:"get"==e?function(e){return Lr&&!l(e)?undefined:n(this,0===e?0:e)}:"has"==e?function(e){return!(Lr&&!l(e))&&n(this,0===e?0:e)}:function(e,t){return n(this,0===e?0:e,t),this})},_t(w,!O(kr=Ar)||!(Lr||jr.forEach&&!c(function(){(new Ar).entries().next()})))?(kr=po.getConstructor(Tr,w,Ir,Cr),h.enable()):_t(w,!0)&&(h=(Pr=new kr)[Cr](Lr?{}:-0,1)!=Pr,Kr=c(function(){Pr.has(1)}),Jr=n(function(e){new Ar(e)}),zr=!Lr&&c(function(){for(var e=new Ar,t=5;t--;)e[Cr](t,t);return!e.has(-0)}),Jr||(((kr=Tr(function(e,t){Or(e,jr);e=_r(new Ar,e,kr);return Y(t)||wr(t,e[Cr],{that:e,AS_ENTRIES:Ir}),e})).prototype=jr).constructor=kr),(Kr||zr)&&(co("delete"),co("has"),Ir&&co("get")),(zr||h)&&co(Cr),Lr&&jr.clear&&delete jr.clear),y[w]=kr,g({global:!0,constructor:!0,forced:kr!=Ar},y),kn(kr,w),Lr||po.setStrong(kr,w,Ir),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Jr=De("span").classList,Kr=Jr&&Jr.constructor&&Jr.constructor.prototype,zr=Kr===Object.prototype?undefined:Kr,Yr=f("iterator"),Qr=f("toStringTag"),Zr=Jn.values,eo=function(e,t){if(e){if(e[Yr]!==Zr)try{Ve(e,Yr,Zr)}catch(_){e[Yr]=Zr}if(e[Qr]||Ve(e,Qr,t),Vr[t])for(var n in Jn)if(e[n]!==Jn[n])try{Ve(e,n,Jn[n])}catch(_){e[n]=Jn[n]}}};for(Nr in Vr)eo(v[Nr]&&v[Nr].prototype,Nr);eo(zr,"DOMTokenList");var to,no,ro,oo=Date,io=s(oo.prototype.getTime),h=(g({target:"Date",stat:!0},{now:function(){return io(new oo)}}),Date.prototype),ao=s(h.toString),uo=s(h.getTime),co=("Invalid Date"!=String(new Date(NaN))&&ft(h,"toString",function(){var e=uo(this);return e==e?ao(this):"Invalid Date"}),Je.EXISTS),y=Ge.f,w=Function.prototype,so=s(w.toString),fo=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,lo=s(fo.exec),po=(d&&!co&&y(w,"name",{configurable:!0,get:function(){try{return lo(fo,so(this))[1]}catch(_){return""}}}),function(e,t){var n=[][e];return!!n&&c(function(){n.call(null,t||function(){return 1},1)})}),ho=u.forEach,go=po("forEach")?[].forEach:function(e){return ho(this,e,1<arguments.length?arguments[1]:undefined)},yo=(g({target:"Array",proto:!0,forced:[].forEach!=go},{forEach:go}),function(e){if(e&&e.forEach!==go)try{Ve(e,"forEach",go)}catch(_){e.forEach=go}});for(to in Vr)Vr[to]&&yo(v[to]&&v[to].prototype);function vo(e){this.name="__st"+(1e9*Math.random()>>>0)+no+"__",null!=e&&e.forEach(this.add,this),no+=1}yo(zr),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o+=1}return undefined}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(no=Date.now()%1e9,vo.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},vo.prototype["delete"]=function(e){return!!e[this.name]&&(e[this.name]=undefined,!0)},vo.prototype.has=function(e){return!!e[this.name]},ro=vo,Object.defineProperty(window,"WeakSet",{value:function(e){return new ro(e)}}));var mo=Object.assign,bo=Object.defineProperty,wo=s([].concat),h=!mo||c(function(){var e,t,n;return!(!d||1===mo({b:1},mo(bo({},"a",{enumerable:!0,get:function(){bo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(t={},(e={})[n=Symbol()]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=mo({},e)[n]||"abcdefghijklmnopqrst"!=rn(mo({},t)).join(""))})?function(e,t){for(var n=Ee(e),r=arguments.length,o=1,i=Pt.f,a=H.f;o<r;)for(var u,c=z(arguments[o++]),s=i?wo(rn(c),i(c)):rn(c),f=s.length,l=0;l<f;)u=s[l++],d&&!m(a,c,u)||(n[u]=c[u]);return n}:mo,co=(g({target:"Object",stat:!0,arity:2,forced:Object.assign!==h},{assign:h}),c(function(){rn(1)})),Eo=(g({target:"Object",stat:!0,forced:co},{keys:function(e){return rn(Ee(e))}}),He.f),w=c(function(){Eo(1)});function Oo(e){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}g({target:"Object",stat:!0,forced:!d||w,sham:!d},{getOwnPropertyDescriptor:function(e,t){return Eo(ee(e),t)}}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===undefined||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if((r=arguments[n])!==undefined&&null!==r)for(var r=Object(r),o=Object.keys(Object(r)),i=0,a=o.length;i<a;i++){var u=o[i],c=Object.getOwnPropertyDescriptor(r,u);null!=c&&c.enumerable&&(t[u]=r[u])}return t}});var y=ar.f,h=c(function(){return!Object.getOwnPropertyNames(1)}),co=(g({target:"Object",stat:!0,forced:h},{getOwnPropertyNames:y}),g({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(e){for(var t,n,r=ee(e),o=He.f,i=Lt(r),a={},u=0;i.length>u;)(n=o(r,t=i[u++]))!==undefined&&tr(a,t,n);return a}}),Function.prototype),Ro=co.apply,So=co.call,xo="object"==typeof Reflect&&Reflect.apply||(M?So.bind(Ro):function(){return So.apply(Ro,arguments)}),To=s([].slice),Po=re("JSON","stringify"),Io=s(/./.exec),Lo=s("".charAt),Co=s("".charCodeAt),Ao=s("".replace),jo=s(1..toString),ko=/[\uD800-\uDFFF]/g,No=/^[\uD800-\uDBFF]$/,_o=/^[\uDC00-\uDFFF]$/,Uo=!ue||c(function(){var e=re("Symbol")();return"[null]"!=Po([e])||"{}"!=Po({a:e})||"{}"!=Po(Object(e))}),Do=c(function(){return'"\\udf06\\ud834"'!==Po("\udf06\ud834")||'"\\udead"'!==Po("\udead")}),Mo=function(e,t){var n=To(arguments),r=t;if((l(t)||e!==undefined)&&!fe(e))return Ft(t)||(t=function(e,t){if(O(r)&&(t=m(r,this,e,t)),!fe(t))return t}),n[1]=t,xo(Po,null,n)},Fo=function(e,t,n){var r=Lo(n,t-1),n=Lo(n,t+1);return Io(No,e)&&!Io(_o,n)||Io(_o,e)&&!Io(No,r)?"\\u"+jo(Co(e,0),16):e},Ho=(Po&&g({target:"JSON",stat:!0,arity:3,forced:Uo||Do},{stringify:function(e,t,n){var r=To(arguments),r=xo(Uo?Mo:Po,null,r);return Do&&"string"==typeof r?Ao(r,ko,Fo):r}}),f("species")),w=function(t){return 51<=ae||!c(function(){var e=[];return(e.constructor={})[Ho]=function(){return{foo:1}},1!==e[t](Boolean).foo})},qo=u.filter,h=w("filter"),Bo=(g({target:"Array",proto:!0,forced:!h},{filter:function(e){return qo(this,e,1<arguments.length?arguments[1]:undefined)}}),a.indexOf),Wo=s([].indexOf),Xo=!!Wo&&1/Wo([1],1,-0)<0,y=po("indexOf"),$o=(g({target:"Array",proto:!0,forced:Xo||!y},{indexOf:function(e){var t=1<arguments.length?arguments[1]:undefined;return Xo?Wo(this,e,t)||0:Bo(this,e,t)}}),TypeError),Go=Object.getOwnPropertyDescriptor,Vo=d&&!function(){if(this!==undefined)return 1;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(_){return _ instanceof TypeError}}()?function(e,t){if(Ft(e)&&!Go(e,"length").writable)throw $o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},Jo=TypeError,Ko=function(e){if(9007199254740991<e)throw Jo("Maximum allowed index exceeded");return e},zo=TypeError,Yo=function(e,t){if(!delete e[t])throw zo("Cannot delete property "+de(t)+" of "+de(e))},co=w("splice"),Qo=Math.max,Zo=Math.min,ei=(g({target:"Array",proto:!0,forced:!co},{splice:function(e,t){var n,r,o,i,a,u,c=Ee(this),s=wt(c),f=vt(e,s),e=arguments.length;for(0===e?n=r=0:r=1===e?(n=0,s-f):(n=e-2,Zo(Qo(ht(t),0),s-f)),Ko(s+n-r),o=tn(c,r),i=0;i<r;i++)(a=f+i)in c&&tr(o,i,c[a]);if(n<(o.length=r)){for(i=f;i<s-r;i++)u=i+n,(a=i+r)in c?c[u]=c[a]:Yo(c,u);for(i=s;s-r+n<i;i--)Yo(c,i-1)}else if(r<n)for(i=s-r;f<i;i--)u=i+n-1,(a=i+r-1)in c?c[u]=c[a]:Yo(c,u);for(i=0;i<n;i++)c[i+f]=arguments[i+2];return Vo(c,s-r+n),o}}),s([].join)),h=z!=Object,a=po("join",","),ti=(g({target:"Array",proto:!0,forced:h||!a},{join:function(e){return ei(ee(this),e===undefined?",":e)}}),u.map),y=w("map"),co=(g({target:"Array",proto:!0,forced:!y},{map:function(e){return ti(this,e,1<arguments.length?arguments[1]:undefined)}}),g({target:"Object",stat:!0},{setPrototypeOf:Mn}),c(function(){Ln(1)})),ni=(g({target:"Object",stat:!0,forced:co,sham:!p},{getPrototypeOf:function(e){return Ln(Ee(e))}}),function(e,t){return(ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)}),E=function(){return(E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ri(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var oi=["ext1","ext2","ext3","level","trace","tag","seq","code"];g({target:"Array",stat:!0},{isArray:Ft});var ii=function(){var e=R(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ai=v.RegExp,h=c(function(){var e=ai("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),a=h||c(function(){return!ai("a","y").sticky}),y={BROKEN_CARET:h||c(function(){var e=ai("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:a,UNSUPPORTED_Y:h},ui=v.RegExp,co=c(function(){var e=ui(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),ci=v.RegExp,p=c(function(){var e=ci("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),si=ct.get,fi=B("native-string-replace",String.prototype.replace),li=RegExp.prototype.exec,di=li,pi=s("".charAt),hi=s("".indexOf),gi=s("".replace),yi=s("".slice),vi=(a=/b*/g,m(li,h=/a/,"a"),m(li,a,"a"),0!==h.lastIndex||0!==a.lastIndex),mi=y.BROKEN_CARET,bi=/()??/.exec("")[1]!==undefined,wi=di=vi||bi||mi||co||p?function(e){var t,n,r,o,i,a,u=this,c=si(u),e=S(e),s=c.raw;if(s)return s.lastIndex=u.lastIndex,l=m(di,s,e),u.lastIndex=s.lastIndex,l;var f=c.groups,s=mi&&u.sticky,l=m(ii,u),c=u.source,d=0,p=e;if(s&&(l=gi(l,"y",""),-1===hi(l,"g")&&(l+="g"),p=yi(e,u.lastIndex),0<u.lastIndex&&(!u.multiline||u.multiline&&"\n"!==pi(e,u.lastIndex-1))&&(c="(?: "+c+")",p=" "+p,d++),t=new RegExp("^(?:"+c+")",l)),bi&&(t=new RegExp("^"+c+"$(?!\\s)",l)),vi&&(n=u.lastIndex),r=m(li,s?t:u,p),s?r?(r.input=yi(r.input,d),r[0]=yi(r[0],d),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:vi&&r&&(u.lastIndex=u.global?r.index+r[0].length:n),bi&&r&&1<r.length&&m(fi,r[0],t,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===undefined&&(r[o]=undefined)}),r&&f)for(r.groups=i=dn(null),o=0;o<f.length;o++)i[(a=f[o])[0]]=r[a[1]];return r}:di,Ei=(g({target:"RegExp",proto:!0,forced:/./.exec!==wi},{exec:wi}),f("species")),Oi=RegExp.prototype,B=function(n,e,t,r){var a,o=f(n),u=!c(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),i=u&&!c(function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[Ei]=function(){return t},t.flags="",t[o]=/./[o]),t.exec=function(){return e=!0,null},t[o](""),!e});u&&i&&!t||(a=s(/./[o]),i=e(o,""[n],function(e,t,n,r,o){var e=s(e),i=t.exec;return i===wi||i===Oi.exec?u&&!o?{done:!0,value:a(t,n,r)}:{done:!0,value:e(n,t,r)}:{done:!1}}),ft(String.prototype,n,i[0]),ft(Oi,o,i[1])),r&&Ve(Oi[o],"sham",!0)},Ri=r.charAt,Si=function(e,t,n){return t+(n?Ri(e,t).length:1)},xi=Math.floor,Ti=s("".charAt),Pi=s("".replace),Ii=s("".slice),Li=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ci=/\$([$&'`]|\d{1,2})/g,Ai=TypeError,ji=function(e,t){var n=e.exec;if(O(n))return null!==(n=m(n,e,t))&&R(n),n;if("RegExp"===V(e))return m(wi,e,t);throw Ai("RegExp#exec called on incompatible receiver")},ki=f("replace"),Ni=Math.max,_i=Math.min,Ui=s([].concat),Di=s([].push),Mi=s("".indexOf),Fi=s("".slice),h="$0"==="a".replace(/./,"$0"),Hi=!!/./[ki]&&""===/./[ki]("a","$0");B("replace",function(e,b,w){var E=Hi?"$":"$0";return[function(e,t){var n=Z(this),r=Y(e)?undefined:ge(e,ki);return r?m(r,e,n,t):m(b,S(n),e,t)},function(e,t){var n=R(this),r=S(e);if("string"==typeof t&&-1===Mi(t,E)&&-1===Mi(t,"$<")){e=w(b,n,r,t);if(e.done)return e.value}var o,i=O(t),a=(i||(t=S(t)),n.global);a&&(o=n.unicode,n.lastIndex=0);for(var u=[];;){var c=ji(n,r);if(null===c)break;if(Di(u,c),!a)break;""===S(c[0])&&(n.lastIndex=Si(r,bt(n.lastIndex),o))}for(var s,f="",l=0,d=0;d<u.length;d++){for(var p=S((c=u[d])[0]),h=Ni(_i(ht(c.index),r.length),0),g=[],y=1;y<c.length;y++)Di(g,(s=c[y])===undefined?s:String(s));var v=c.groups,m=i?(m=Ui([p],g,h,r),v!==undefined&&Di(m,v),S(xo(t,undefined,m))):function(i,a,u,c,s,e){var f=u+i.length,l=c.length,t=Ci;return s!==undefined&&(s=Ee(s),t=Li),Pi(e,t,function(e,t){var n;switch(Ti(t,0)){case"$":return"$";case"&":return i;case"`":return Ii(a,0,u);case"'":return Ii(a,f);case"<":n=s[Ii(t,1,-1)];break;default:var r,o=+t;if(0==o)return e;if(l<o)return 0!==(r=xi(o/10))&&r<=l?c[r-1]===undefined?Ti(t,1):c[r-1]+Ti(t,1):e;n=c[o-1]}return n===undefined?"":n})}(p,r,h,g,v,t);l<=h&&(f+=Fi(r,l,h)+m,l=h+p.length)}return f+Fi(r,l)}]},!!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!h||Hi);qi=!1,(a=/[ac]/).exec=function(){return qi=!0,/./.exec.apply(this,arguments)};var qi,y=!0===a.test("abc")&&qi,Bi=/./.test,Wi=(g({target:"RegExp",proto:!0,forced:!y},{test:function(e){var t=R(this),e=S(e),n=t.exec;return O(n)?null!==(n=m(n,t,e))&&(R(n),!0):m(Bi,t,e)}}),RegExp.prototype),co=Je.PROPER,Xi=RegExp.prototype.toString,p=c(function(){return"/a/b"!=Xi.call({source:"a",flags:"b"})}),r=co&&"toString"!=Xi.name,$i=((p||r)&&ft(RegExp.prototype,"toString",function(){var e,t=R(this);return"/"+S(t.source)+"/"+S((e=(t=t).flags)!==undefined||"flags"in Wi||b(t,"flags")||!oe(Wi,t)?e:m(ii,t))},{unsafe:!0}),u.some),h=po("some"),Gi=(g({target:"Array",proto:!0,forced:!h},{some:function(e){return $i(this,e,1<arguments.length?arguments[1]:undefined)}}),f("isConcatSpreadable")),a=51<=ae||!c(function(){var e=[];return e[Gi]=!1,e.concat()[0]!==e}),y=w("concat"),co=(g({target:"Array",proto:!0,arity:1,forced:!a||!y},{concat:function(e){for(var t,n,r,o,i,a=Ee(this),u=tn(a,0),c=0,s=-1,f=arguments.length;s<f;s++)if(o=r=-1===s?a:arguments[s],i=void 0,!l(o)||((i=o[Gi])!==undefined?!i:!Ft(o)))Ko(c+1),tr(u,c++,r);else for(n=wt(r),Ko(c+n),t=0;t<n;t++,c++)t in r&&tr(u,c,r[t]);return u.length=c,u}}),w("slice")),Vi=f("species"),Ji=Array,Ki=Math.max;g({target:"Array",proto:!0,forced:!co},{slice:function(e,t){var n,r,o,i=ee(this),a=wt(i),u=vt(e,a),c=vt(t===undefined?a:t,a);if(Ft(i)&&(n=i.constructor,(n=Qt(n)&&(n===Ji||Ft(n.prototype))||l(n)&&null===(n=n[Vi])?undefined:n)===Ji||n===undefined))return To(i,u,c);for(r=new(n===undefined?Ji:n)(Ki(c-u,0)),o=0;u<c;u++,o++)u in i&&tr(r,o,i[u]);return r.length=o,r}});ea.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},ea.prototype.on=function(e,t,n){var r;if(void 0===n&&(n=0),this)return(r=this.eventsList[e])||(this.eventsList[e]=[],r=this.eventsList[e]),-1===this.indexOf(r,t)&&r.push({name:e,type:n||0,callback:t}),this},ea.prototype.one=function(e,t){this.on(e,t,1)},ea.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(U){}}return null}},ea.prototype.clear=function(){this.eventsList={}};var zi,Yi=ea,Qi=function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach(function(t){n[t]=e.map(function(e){return e[t]})}),n.count=e.length,da(n)},Zi=function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}};function ea(){var a=this;this.emit=function(e,t){if(a){var n;if(null!=(r=a.eventsList[e])&&r.length)for(var r=r.slice(),o=0;o<r.length;o++){n=r[o];try{var i=n.callback.apply(a,[t]);if(1===n.type&&a.remove(e,n.callback),!1===i)break}catch(d){throw d}}return a}},this.eventsList={}}(p=zi=zi||{})[p.number=-1]="number",p.string="";var T,x,ta,na=function(e,t){return"number"==typeof e||"string"==typeof e?e:t?zi.string:zi.number},ra=function(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e},oa=function(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)},ia=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],aa=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|)$/gi,ua=["ret","retcode","code","errcode"],ca=function(e,t,n){var r,o;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(i=(o=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code)?"unknown":i,isErr:o.isErr};"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null==(r=null==t?void 0:t.ret)?void 0:r.join)&&(ua=[].concat(t.ret.map(function(e){return e.toLowerCase()})));var i,a=Object.getOwnPropertyNames(e).filter(function(e){return-1!==ua.indexOf(e.toLowerCase())});return a.length?{code:""+(i=e[a[0]]),isErr:0!==i&&"0"!==i}:{code:"unknown",isErr:!1}}catch(d){return{code:"unknown",isErr:!1}}},sa=function(e,t,n){try{var r="function"==typeof t?t(e,null==n?void 0:n.url)||"":e;return pa(r).slice(0,102400)}catch(U){return""}},fa=function(){var n=new WeakSet;return function(e,t){if(t instanceof Error)return"Error.message: "+t.message+" \n  Error.stack: "+t.stack;if("object"===Oo(t)&&null!==t){if(n.has(t))return"[Circular "+(e||"root")+"]";n.add(t)}return t}},la=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,fa(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,fa(),4)||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},da=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,fa())||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},pa=function bs(n,r){void 0===r&&(r=3);var o,i,a,u="";return Array.isArray(n)?(u+="[",o=n.length,n.forEach(function(e,t){"object"===Oo(e)&&1<r?u+=bs(e,r-1):u+=ga(e),u+=t===o-1?"":","}),u+="]"):n instanceof Object?(u="{",i=Object.keys(n),a=i.length,i.forEach(function(e,t){"object"===Oo(n[e])&&1<r?u+='"'+e+'":'+bs(n[e],r-1):u+=ha(e,n[e]),u+=t===a-1||t<a-1&&"undefined"==typeof n[i[t+1]]?"":","}),u+="}"):u+=n,u},ha=function(e,t){var n=Oo(t),r="";return"string"===n||"object"===n?r+='"'+e+'":"'+t+'"':"function"==typeof t?r+='"'+e+'":"function '+t.name+'"':"symbol"===Oo(t)?r+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!==n||(r+='"'+e+'": '+t),r},ga=function(e){var t=Oo(e);return""+("undefined"===t||"symbol"===t||"function"===t?"null":"string"===t||"object"===t?'"'+e+'"':e)},ya=((r=T=T||{}).INFO_ALL="-1",r.API_RESPONSE="1",r.INFO="2",r.ERROR="4",r.PROMISE_ERROR="8",r.AJAX_ERROR="16",r.SCRIPT_ERROR="32",r.IMAGE_ERROR="64",r.CSS_ERROR="128",r.CONSOLE_ERROR="256",r.MEDIA_ERROR="512",r.RET_ERROR="1024",r.REPORT="2048",r.PV="4096",r.EVENT="8192",r.PAGE_NOT_FOUND_ERROR="16384",r.WEBSOCKET_ERROR="32768",r.BRIDGE_ERROR="65536",0,0,(h=x=x||{}).LOG="log",h.SPEED="speed",h.PERFORMANCE="performance",h.OFFLINE="offline",h.WHITE_LIST="whiteList",h.VITALS="vitals",h.PV="pv",h.CUSTOM_PV="customPV",h.EVENT="event",h.CUSTOM="custom",h.SDK_ERROR="sdkError",h.SET_DATA="setData",h.LOAD_PACKAGE="loadPackage",(a=ta=ta||{}).production="production",a.development="development",a.gray="gray",a.pre="pre",a.daily="daily",a.local="local",a.test="test",a.others="others",TypeError),y=function(s){return function(e,t,n,r){he(t);var o=Ee(e),i=z(o),a=wt(o),u=s?a-1:0,c=s?-1:1;if(n<2)for(;;){if(u in i){r=i[u],u+=c;break}if(u+=c,s?u<0:a<=u)throw ya("Reduce of empty array with no initial value")}for(;s?0<=u:u<a;u+=c)u in i&&(r=t(r,i[u],u,o));return r}},w={left:y(!1),right:y(!0)},va="process"==V(v.process),ma=w.left,co=po("reduce"),ba=(g({target:"Array",proto:!0,forced:!co||!va&&79<ae&&ae<83},{reduce:function(e){var t=arguments.length;return ma(this,e,t,1<t?arguments[1]:undefined)}}),TypeError),wa=function(e,t){if(e<t)throw ba("Not enough arguments");return e},Ea=/MSIE .\./.test(e),Oa=v.Function,p=function(i){return Ea?function(e,t){var n=2<wa(arguments.length,1),r=O(e)?e:Oa(e),o=n?To(arguments,2):undefined;return i(n?function(){xo(r,this,o)}:r,t)}:i},r={setTimeout:p(v.setTimeout),setInterval:p(v.setInterval)},h=r.setInterval,a=(g({global:!0,bind:!0,forced:v.setInterval!==h},{setInterval:h}),r.setTimeout),Ra=(g({global:!0,bind:!0,forced:v.setTimeout!==a},{setTimeout:a}),function(e){return e.filter(function(n,r){return"static"!==n.type||!e.find(function(e,t){return n.url===e.url&&200===n.status&&r<t})})}),Sa=function(n,r){var o,i=[],a=n.config;return n.lifeCycle.on("destroy",function(){i.length=0}),function(e,t){Array.isArray(e)?i=i.concat(e):i.push(e),r&&i.length>=r||n.sendNow&&0<i.length?(i=Ra(i),t(i.splice(0,i.length)),o&&clearTimeout(o)):(o&&clearTimeout(o),o=setTimeout(function(){o=null,0<(i=Ra(i)).length&&t(i.splice(0,i.length))},a.delay))}},xa=function(e,t){return Array.isArray(e)?t(e.map(function(e){return t=E(E({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(la).join(" ")}),oi.forEach(function(e){t[e]||delete t[e]}),t;var t})):t([E(E({},e),{msg:"string"==typeof e.msg?e.msg:la(e.msg)})])},Ta=function(e){e.level===T.INFO_ALL&&(e.level=T.INFO)},Pa=RangeError,y=function(e){var t=S(Z(this)),n="",r=ht(e);if(r<0||r==Infinity)throw Pa("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Ia=(g({target:"String",proto:!0},{repeat:y}),function(e){return(Array.isArray(e)?e:[e]).map(function(n){return Object.getOwnPropertyNames(n).reduce(function(e,t){return"ctx"!==t&&(e[t]=n[t]),e},{level:T.INFO,msg:""})})}),La=function(r){return function(e){return r.sendPipeline([function(e,n){return n({url:r.config.url||"",data:Qi(Ia(e)),method:"post",contentType:"application/json",type:x.LOG,log:e,requestConfig:{timeout:5e3},success:function(){var t=r.config.onReport;"function"==typeof t&&e.forEach(function(e){t(e)}),"function"==typeof n&&n([])},fail:function(e){"403 forbidden"===e&&r.destroy()}})}],x.LOG)(e)}},Ca=function(c,s){return function(e,t){var n,r,o,i=Array.isArray(e),a=i?e:[e],u=(c.lifeCycle.emit("beforeRequest",e),c.config.beforeRequest);(a="function"==typeof u?a.map(function(e){try{var t=u({logs:e,logType:s});return(null==t?void 0:t.logType)===s&&null!=t&&t.logs?t.logs:!1!==t&&e}catch(_){return e}}).filter(function(e){return!1!==e}):a).length&&(n=a,e=oi,!Array.isArray(n)||n.length<=1||(r=[],o=[],!(o="string"==typeof e?[e]:e)||o.length<=0||(o.forEach(function(t){n.forEach(function(e){null!=e&&e[t]&&r.push(t)})}),0<r.length&&(n=n.map(function(e){var t={};return r.forEach(function(e){t[e]=""}),E(E({},t),e)})))),a=n,t(i?a:a[0]))}},Aa=function(o){return function(e,t){o.lifeCycle.emit("modifyRequest",e);var n=o.config.modifyRequest;if("function"==typeof n)try{var r=n(e);"object"===Oo(r)&&"url"in r&&(e=r)}catch(_){console.error(_)}t(e)}},ja=function(r){return function(e,t){r.lifeCycle.emit("afterRequest",e);var n=r.config.afterRequest;"function"==typeof n&&!1===n(e)||t(e)}},ka=function(){},Na=function(n){if(n&&n.reduce&&n.length)return 1===n.length?function(e,t){n[0](e,t||ka)}:n.reduce(function(n,r){return function(e,t){return void 0===t&&(t=ka),n(e,function(e){return null==r?void 0:r(e,t)})}});throw new TypeError("createPipeline need at least one function param")},_a=function(t,n){Object.getOwnPropertyNames(t).forEach(function(e){"function"==typeof t[e]&&"constructor"!==e&&(n?n[e]="sendPipeline"===e?function(){return function(){}}:function(){}:t[e]=function(){})})},w=(Object.defineProperty(P.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.36.5"},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),T},enumerable:!1,configurable:!0}),P.prototype.init=function(e){this.setConfig(e);for(var t=0;t<P.installedPlugins.length;t++)try{P.installedPlugins[t].patch(this)}catch(i){this.sendSDKError(i)}this.lifeCycle.emit("onInited")},P.prototype.setConfig=function(e){Object.assign(this.config,e);var e=this.config,t=e.id,n=e.uin,r=e.version,o=e.ext1,i=e.ext2,a=e.ext3,u=e.aid,c=e.env,s=void 0===c?"production":c,c=e.pageUrl,e=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==u;return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=r||"1.36.5",this.bean.aid=u||"",this.bean.env=function(){switch(s){case ta.production:case ta.development:case ta.gray:case ta.pre:case ta.daily:case ta.local:case ta.test:case ta.others:return 1;default:return}}()?s:ta.others,c&&this.extendBean("from",encodeURIComponent(c)),o&&this.extendBean("ext1",encodeURIComponent(o)),i&&this.extendBean("ext2",encodeURIComponent(i)),a&&this.extendBean("ext3",encodeURIComponent(a)),e&&this.lifeCycle.emit("onConfigChange",this.config),this.config},P.use=function(e){-1===P.installedPlugins.indexOf(e)&&e.aegisPlugin&&P.installedPlugins.push(e)},P.unuse=function(e){e=P.installedPlugins.indexOf(e);-1!==e&&P.installedPlugins.splice(e,1)},P.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,E({},e[0]),{level:T.INFO}),this.normalLogPipeline(n)},P.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,E({},e[0]),{level:T.INFO_ALL}),this.normalLogPipeline(n)},P.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,E({},e[0])),this.normalLogPipeline(n)},P.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,E({},e[0]),{level:T.ERROR}),this.normalLogPipeline(n)},P.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},P.prototype.reportPv=function(n){var r,o=this;n&&(console.warn("reportPv is deprecated, please use reportEvent"),r=""+Object.getOwnPropertyNames(this.bean).filter(function(e){return"id"!==e}).map(function(e){return e+"="+o.bean[e]}).join("&"),this.sendPipeline([function(e,t){t({url:o.config.url+"/"+n+"?"+r,addBean:!1,type:x.CUSTOM_PV,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],x.CUSTOM_PV)(null))},P.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},P.prototype.reportTime=function(e,t){if("object"===Oo(e))return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},P.prototype.reportT=function(e){var t=e.name,n=e.duration,r=e.ext1,r=void 0===r?"":r,o=e.ext2,o=void 0===o?"":o,i=e.ext3,i=void 0===i?"":i,e=e.from;if("string"==typeof t&&"number"==typeof n&&"string"==typeof r&&"string"==typeof o&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,r,o,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},P.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},P.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},P.prototype.submitCustomTime=function(e,t,n,r,o,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:r||this.config.ext2,ext3:o||this.config.ext3,from:i||undefined})},P.prototype.extendBean=function(e,t){this.bean[e]=t},P.prototype.sendPipeline=function(e,t){var n,i=this;return Na(ri([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},Ca(n=this,t)],e,[Aa(this),function(r,o){i.request(r,function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.failRequestCount=0,o({isErr:!1,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null!=(e=null==r?void 0:r.success)&&e.call.apply(e,ri([r],t))},function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];10<=++i.failRequestCount&&i.destroy(),o({isErr:!0,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null!=(e=null==r?void 0:r.fail)&&e.call.apply(e,ri([r],t))})},ja(this)]))},P.prototype.send=function(e,o,i){var t=this;return Na([Aa(this),function(n,r){t.request(n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!1,result:e,logType:n.type,logs:n.log}),null!=o&&o.apply(void 0,e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!0,result:e,logType:n.type,logs:n.log}),null!=i&&i.apply(void 0,e)})},ja(this)])(e)},P.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},P.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},P.prototype.sendSDKError=function(e){var n=this;this.sendPipeline([function(e,t){t({url:n.config.url+"?id=1085&msg[0]="+encodeURIComponent(la(e))+"&level[0]=2&from="+n.config.id+"&count=1&version="+n.config.id+"(1.36.5)",addBean:!1,method:"get",type:x.SDK_ERROR,log:e})}],x.SDK_ERROR)(e)},P.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,r=P.instances.indexOf(this);-1!==r&&P.instances.splice(r,1);for(var o=P.installedPlugins.length-1;0<=o;o--)try{P.installedPlugins[o].unpatch(this)}catch(F){this.sendSDKError(F)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach(function(e){n[e].writable&&(t[e]=null)}),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&_a(i,this),i=Object.getPrototypeOf(i););0===P.instances.length&&(r=Object.getPrototypeOf(this).constructor,_a(r),_a(P))}},P.version="1.36.5",P.instances=[],P.logType=T,P.environment=ta,P.installedPlugins=[],P),Ua=Function,Da=s([].concat),Ma=s([].join),Fa={},po=M?Ua.bind:function(a){var u=he(this),e=u.prototype,c=To(arguments,1),s=function(){var e=Da(c,To(arguments));if(this instanceof s){var t=u,n=e.length,r=e;if(!b(Fa,n)){for(var o=[],i=0;i<n;i++)o[i]="a["+i+"]";Fa[n]=Ua("C,a","return new C("+Ma(o,",")+")")}return Fa[n](t,r)}return u.apply(a,e)};return l(e)&&(s.prototype=e),s};function P(e){var n,t,r,o,a,i,u,c,s,f,l,d,p,h,g,y=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,hostUrl:"https://aegis.qq.com",websocketHack:!1,env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:"",reportImmediately:!0},this.isWhiteList=!1,this.lifeCycle=new Yi,this.bean={},this.normalLogPipeline=Na([Sa(this,5),xa,function(e,t){var r=n.config;t(e=e.map(function(e){var t,n=r.maxLength||102400;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(U){e.msg=la(e.msg).substring(0,r.maxLength)}return e}))},(h=(n=this).config,g={},function(e,t){var n="number"==typeof h.repeat?h.repeat:5;if(0===n)return t(e);t(e.filter(function(e){return e.level!==T.ERROR&&e.level!==T.PROMISE_ERROR&&e.level!==T.AJAX_ERROR&&e.level!==T.SCRIPT_ERROR&&e.level!==T.IMAGE_ERROR&&e.level!==T.CSS_ERROR&&e.level!==T.MEDIA_ERROR||(g[e.msg]=g[e.msg]||0,g[e.msg]+=1,!(g[e.msg]>n))}))}),(d=this.lifeCycle.emit,p=this.config,function(e,t){var n,r=p.logCreated;return"function"==typeof r?(n=e.filter(function(e){return!1!==r(e)}),d("beforeWrite",n),t(n)):(d("beforeWrite",e),t(e))}),(l=this,setTimeout(function(){var e=l.config.pvUrl,n=void 0===e?"":e;n&&l.sendPipeline([function(e,t){t({url:n,type:x.PV,fail:function(e){"403 forbidden"===e&&l.destroy()}})}],x.PV)(null)},100),function(e,t){t(e)}),(s=c=u=!1,f=[],(a=this).lifeCycle.on("onConfigChange",function(){i&&clearTimeout(i),i=setTimeout(function(){var e,n;!s&&a.config&&(s=!0,e=a.config.whiteListUrl,(n=void 0===e?"":e)&&a.sendPipeline([function(e,t){t({url:n,type:x.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,r=t.result,o=void 0===r?{}:r;if(0===n){if(u=o.is_in_white_list,a.isWhiteList=u,o.shutdown)return void a.destroy();0<=o.rate&&o.rate<=1&&(a.config.random=o.rate,a.isGetSample=!1)}a.isWhiteList&&f.length?La(a)(f.splice(0),function(){}):!a.isWhiteList&&f.length&&(f.length=0);var i=a.config.onWhitelist;"function"==typeof i&&i(u)}catch(m){}},fail:function(e){"403 forbidden"===e&&a.destroy(),c=!0}})}],x.WHITE_LIST)(null),s=!1)},a.config.uin?50:500)}),a.lifeCycle.on("destroy",function(){f.length=0}),function(e,t){var n;u||null!=(n=null==(n=a.config)?void 0:n.api)&&n.reportRequest?t(e.concat(f.splice(0)).map(function(e){return Ta(e),e})):(n=e.filter(function(e){return e.level!==T.INFO&&e.level!==T.API_RESPONSE?(Ta(e),!0):(c||(f.push(e),200<=f.length&&(f.length=200)),!1)})).length&&t(n)}),function(e,t){try{var n=JSON.parse(JSON.stringify(e)),r=(y.lifeCycle.emit("beforeReport",n),y.config.beforeReport);(e="function"==typeof r?e.filter(function(e){return!1!==r(e)}):e).length&&t(e)}catch(v){}},La(this)]),this.eventPipeline=Na([Sa(this,10),(o=this,function(e){o.sendPipeline([function(e,t){var n=e.map(function(e){return{name:e.name,ext1:e.ext1||o.config.ext1||"",ext2:e.ext2||o.config.ext2||"",ext3:e.ext3||o.config.ext3||""}});t({url:o.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:x.EVENT,log:e,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],x.EVENT)(e)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=Na([Sa(this,10),(r=this,function(e){return r.sendPipeline([function(e,t){t({url:r.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:x.CUSTOM,log:e,fail:function(e){"403 forbidden"===e&&r.destroy()}})}],x.CUSTOM)(e)})]),this.config=(t=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),t.url=t.url||e+"/collect",t.offlineUrl=t.offlineUrl||e+"/offline",t.whiteListUrl=t.whiteListUrl||e+"/collect/whitelist",t.pvUrl=t.pvUrl||e+"/collect/pv",t.eventUrl=t.eventUrl||e+"/collect/events",t.speedUrl=t.speedUrl||e+"/speed",t.customTimeUrl=t.customTimeUrl||e+"/speed/custom",t.performanceUrl=t.performanceUrl||e+"/speed/performance",t.webVitalsUrl=t.webVitalsUrl||e+"/speed/webvitals",t.setDataReportUrl=t.SetDataReportUrl||e+"/speed/miniProgramData",t),P.instances.push(this)}g({target:"Function",proto:!0,forced:Function.bind!==po},{bind:po});Za.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},Za.prototype.unpatch=function(e){e=this.instances.indexOf(e);-1!==e&&(this.instances.splice(e,1),0===this.instances.length&&this.uninstall())},Za.prototype.countInstance=function(){return this.instances.length},Za.prototype.uninstall=function(){var e;null!=(e=null==(e=this.option)?void 0:e.destroy)&&e.apply(this)},Za.prototype.walk=function(n){var r=this;this.instances.forEach(function(e){var t=r.canUse(e);t&&n(e,t)})},Za.prototype.canUse=function(e){e=this.getConfig(e);return!(!e||"object"!==Oo(e))||!!e},Za.prototype.getConfig=function(e){return null==(e=e.config)?void 0:e[this.name]},Za.prototype.exist=function(e){return-1===this.instances.indexOf(e)},Za.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null!=(t=null==(t=this.option)?void 0:t.init)&&t.call(this.option,this.getConfig(e)))},Za.prototype.triggerOnNewAegis=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.onNewAegis)&&t.call(this.option,e,this.getConfig(e))};var I=Za,co=new I({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(o){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),Ha=s(1..valueOf),p="\t\n\x0B\f\r                　\u2028\u2029\ufeff",qa=s("".replace),h="["+p+"]",Ba=RegExp("^"+h+h+"*"),Wa=RegExp(h+h+"*$"),r=function(t){return function(e){e=S(Z(e));return 1&t&&(e=qa(e,Ba,"")),e=2&t?qa(e,Wa,""):e}},a={start:r(1),end:r(2),trim:r(3)},po=Tt.f,Xa=He.f,$a=Ge.f,Ga=a.trim,Va=v.Number,Ja=Va.prototype,Ka=v.TypeError,za=s("".slice),Ya=s("".charCodeAt),Qa=function(e){var t,n,r,o,i,a,u,c=ke(e,"number");if(fe(c))throw Ka("Cannot convert a Symbol value to a number");if("string"==typeof c&&2<c.length)if(c=Ga(c),43===(e=Ya(c,0))||45===e){if(88===(t=Ya(c,2))||120===t)return NaN}else if(48===e){switch(Ya(c,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=(o=za(c,2)).length,a=0;a<i;a++)if((u=Ya(o,a))<48||r<u)return NaN;return parseInt(o,n)}return+c};function Za(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}if(_t("Number",!Va(" 0o1")||!Va("0b1")||Va("+0x1"))){for(var eu,tu=function(e){var e=arguments.length<1?0:Va(function(e){e=ke(e,"number");return"bigint"==typeof e?e:Qa(e)}(e)),t=this;return oe(Ja,t)&&c(function(){Ha(t)})?_r(Object(e),t,tu):e},nu=d?po(Va):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ru=0;nu.length>ru;ru++)b(Va,eu=nu[ru])&&!b(tu,eu)&&$a(tu,eu,Xa(Va,eu));(tu.prototype=Ja).constructor=tu,ft(v,"Number",tu,{constructor:!0})}var ou=RangeError,iu=String,au=Math.floor,uu=s(y),cu=s("".slice),su=s(1..toFixed),fu=function(e,t,n){return 0===t?n:t%2==1?fu(e,t-1,n*e):fu(e*e,t/2,n)},lu=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=au(o/1e7)},du=function(e,t){for(var n=6,r=0;0<=--n;)r+=e[n],e[n]=au(r/t),r=r%t*1e7},pu=function(e){for(var t,n=6,r="";0<=--n;)""===r&&0!==n&&0===e[n]||(t=iu(e[n]),r=""===r?t:r+uu("0",7-t.length)+t);return r},h=c(function(){return"0.000"!==su(8e-5,3)||"1"!==su(.9,0)||"1.25"!==su(1.255,2)||"1000000000000000128"!==su(0xde0b6b3a7640080,0)})||!c(function(){su({})});g({target:"Number",proto:!0,forced:h},{toFixed:function(e){var t,n,r,o=Ha(this),e=ht(e),i=[0,0,0,0,0,0],a="",u="0";if(e<0||20<e)throw ou("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return iu(o);if(o<0&&(a="-",o=-o),1e-21<o)if(r=(t=function(){for(var e=0,t=o*fu(2,69,1);4096<=t;)e+=12,t/=4096;for(;2<=t;)e+=1,t/=2;return e}()-69)<0?o*fu(2,-t,1):o/fu(2,t,1),r*=4503599627370496,0<(t=52-t)){for(lu(i,0,r),n=e;7<=n;)lu(i,1e7,0),n-=7;for(lu(i,fu(10,n,1),0),n=t-1;23<=n;)du(i,1<<23),n-=23;du(i,1<<n),lu(i,1,1),du(i,2),u=pu(i)}else lu(i,0,r),lu(i,1<<-t,0),u=pu(i)+uu("0",e);return 0<e?a+((r=u.length)<=e?"0."+uu("0",e-r)+u:cu(u,0,r-e)+"."+cu(u,r-e)):a+u}});var hu,gu,yu=["/collect/offlineAuto","/aegis-sdk","/flog.core.min.js"],vu=function(t){var n;return t.payload?(n={},Object.keys(t).forEach(function(e){"payload"!==e&&(n[e]=t[e])}),n):t},mu=function(){return"undefined"!=typeof window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now},bu=function(t){return yu.some(function(e){return-1<t.indexOf(e)})},wu=new I({name:"reportAssetSpeed"}),r=wu=new I({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;mu()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},publishMany:function(e,t){for(var n=t.config,r=0,o=e.length;r<o;r++){var i=e[r];-1===this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)||bu(i.name)||this.publish(this.generateLog(i,n))}},collectSuccessLog:function(n){var e,t,r=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),n),(e=new window.PerformanceObserver(function(e){r.publishMany(e.getEntries(),n)})).observe({entryTypes:[this.collectEntryType]}),n.lifeCycle.on("destroy",function(){0===wu.countInstance()&&e.disconnect()})):(t=setInterval(function(){var e=performance.getEntriesByType(r.collectEntryType),t=e.slice(r.collectCur);r.collectCur=e.length,r.publishMany(t,n)},3e3),n.lifeCycle.on("destroy",function(){0===wu.countInstance()&&clearInterval(t)}))},collectFailLog:function(e){var r=this,o=e.config,t=function(e){var t,n;e&&(e=e.target||e.srcElement,!(t=(null==e?void 0:e.src)||(null==e?void 0:e.href))||"string"!=typeof t||-1<window.location.href.indexOf(t)||(e="function"==typeof(null==(e=o.api)?void 0:e.resourceTypeHandler)?null==(e=o.api)?void 0:e.resourceTypeHandler(t):"",n=performance.getEntriesByType(r.collectEntryType).find(function(e){return e.name===t}),bu(t)||(n={url:ra(t),status:400,duration:Number(((null==n?void 0:n.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:oa(t),urlQuery:ra(t,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},r.publish(n))))};window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",function(){0===wu.countInstance()&&window.document.removeEventListener("error",t,!0)})},generateLog:function(e,t){var n,t="function"==typeof(null==(n=t.api)?void 0:n.resourceTypeHandler)?null==(n=t.api)?void 0:n.resourceTypeHandler(e.name):"";return{url:ra(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:t||"static",isHttps:oa(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:ra(e.name,!0),domainLookup:na(e.domainLookupEnd-e.domainLookupStart),connectTime:na(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t,n;mu()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0)))},destroy:function(){this.option.publish=function(){}}}),po=f("species"),Eu=TypeError,Ou=f("species"),y=/(?:ipad|iphone|ipod).*applewebkit/i.test(e),h=v.setImmediate,Ru=v.clearImmediate,Su=v.process,xu=v.Dispatch,Tu=v.Function,L=v.MessageChannel,Pu=v.String,Iu=0,Lu={};try{hu=v.location}catch(_){}var Cu=function(e){var t;b(Lu,e)&&(t=Lu[e],delete Lu[e],t())},Au=function(e){return function(){Cu(e)}},C=function(e){Cu(e.data)},ju=function(e){v.postMessage(Pu(e),hu.protocol+"//"+hu.host)};h&&Ru||(h=function(e){wa(arguments.length,1);var t=O(e)?e:Tu(e),n=To(arguments,1);return Lu[++Iu]=function(){xo(t,undefined,n)},gu(Iu),Iu},Ru=function(e){delete Lu[e]},va?gu=function(e){Su.nextTick(Au(e))}:xu&&xu.now?gu=function(e){xu.now(Au(e))}:L&&!y?(Hu=(L=new L).port2,L.port1.onmessage=C,gu=Mt(Hu.postMessage,Hu)):v.addEventListener&&O(v.postMessage)&&!v.importScripts&&hu&&"file:"!==hu.protocol&&!c(ju)?(gu=ju,v.addEventListener("message",C,!1)):gu="onreadystatechange"in De("script")?function(e){an.appendChild(De("script")).onreadystatechange=function(){an.removeChild(this),Cu(e)}}:function(e){setTimeout(Au(e),0)});var ku,Nu,_u,Uu,Du,Mu,Fu,L={set:h,clear:Ru},Hu=/ipad|iphone|ipod/i.test(e)&&v.Pebble!==undefined,ju=/web0s(?!.*chrome)/i.test(e),C=He.f,qu=L.set,h=v.MutationObserver||v.WebKitMutationObserver,Ru=v.document,Bu=v.process,e=v.Promise,C=C(v,"queueMicrotask"),C=C&&C.value,Wu=(C||(ku=function(){var e,t;for(va&&(e=Bu.domain)&&e.exit();Nu;){t=Nu.fn,Nu=Nu.next;try{t()}catch(_){throw Nu?Uu():_u=undefined,_}}_u=undefined,e&&e.enter()},Uu=y||va||ju||!h||!Ru?!Hu&&e&&e.resolve?((y=e.resolve(undefined)).constructor=e,Fu=Mt(y.then,y),function(){Fu(ku)}):va?function(){Bu.nextTick(ku)}:(qu=Mt(qu,v),function(){qu(ku)}):(Du=!0,Mu=Ru.createTextNode(""),new h(ku).observe(Mu,{characterData:!0}),function(){Mu.data=Du=!Du})),C||function(e){e={fn:e,next:undefined};_u&&(_u.next=e),Nu||(Nu=e,Uu()),_u=e}),Xu=function(e){try{return{error:!1,value:e()}}catch(_){return{error:!0,value:_}}},ju=function(){this.head=null,this.tail=null},$u=(ju.prototype={add:function(e){e={item:e,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},ju),Gu=v.Promise,Vu="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Ju=!Vu&&!va&&"object"==typeof window&&"object"==typeof document;Gu&&Gu.prototype;var Ku,zu,Yu,Qu=f("species"),Zu=!1,ec=O(v.PromiseRejectionEvent),Hu={CONSTRUCTOR:_t("Promise",function(){var e=ot(Gu),t=e!==String(Gu);if(!t&&66===ae)return!0;if(!ae||ae<51||!/native code/.test(e)){var e=new Gu(function(e){e(1)}),n=function(e){e(function(){},function(){})};if((e.constructor={})[Qu]=n,!(Zu=e.then(function(){})instanceof n))return!0}return!t&&(Ju||Vu)&&!ec}),REJECTION_EVENT:ec,SUBCLASSING:Zu},tc=TypeError,nc=function(e){var n,r;this.promise=new e(function(e,t){if(n!==undefined||r!==undefined)throw tc("Bad Promise constructor");n=e,r=t}),this.resolve=he(n),this.reject=he(r)},rc={f:function(e){return new nc(e)}},oc=L.set,e=Hu.CONSTRUCTOR,ic=Hu.REJECTION_EVENT,y=Hu.SUBCLASSING,ac=ct.getterFor("Promise"),uc=ct.set,Ru=Gu&&Gu.prototype,cc=Gu,sc=Ru,fc=v.TypeError,lc=v.document,dc=v.process,pc=rc.f,hc=pc,gc=!!(lc&&lc.createEvent&&v.dispatchEvent),yc=function(e){var t;return!(!l(e)||!O(t=e.then))&&t},vc=function(e,t){var n,r,o,i,a=t.value,u=1==t.state,c=u?e.ok:e.fail,s=e.resolve,f=e.reject,l=e.domain;try{c?(u||(2===t.rejection&&(i=t,m(oc,v,function(){var e=i.facade;va?dc.emit("rejectionHandled",e):bc("rejectionhandled",e,i.value)})),t.rejection=1),!0===c?n=a:(l&&l.enter(),n=c(a),l&&(l.exit(),o=!0)),n===e.promise?f(fc("Promise-chain cycle")):(r=yc(n))?m(r,n,s,f):s(n)):f(a)}catch(_){l&&!o&&l.exit(),f(_)}},mc=function(n,o){n.notified||(n.notified=!0,Wu(function(){for(var e,r,t=n.reactions;e=t.get();)vc(e,n);n.notified=!1,o&&!n.rejection&&(r=n,m(oc,v,function(){var e,t=r.facade,n=r.value;if(wc(r)&&(e=Xu(function(){va?dc.emit("unhandledRejection",n,t):bc("unhandledrejection",t,n)}),r.rejection=va||wc(r)?2:1,e.error))throw e.value}))}))},bc=function(e,t,n){var r;gc?((r=lc.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),v.dispatchEvent(r)):r={promise:t,reason:n},!ic&&(t=v["on"+e])?t(r):"unhandledrejection"===e&&function(e,t){var n=v.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},wc=function(e){return 1!==e.rejection&&!e.parent},Ec=function(t,n,r){return function(e){t(n,e,r)}},Oc=function(e,t,n){e.done||(e.done=!0,(e=n?n:e).value=t,e.state=2,mc(e,!0))},Rc=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw fc("Promise can't be resolved itself");var r=yc(n);r?Wu(function(){var e={done:!1};try{m(r,n,Ec(Rc,e,t),Ec(Oc,e,t))}catch(_){Oc(e,_,t)}}):(t.value=n,t.state=1,mc(t,!1))}catch(_){Oc({done:!1},_,t)}}};if(e&&(sc=(cc=function(e){Or(this,sc),he(e),m(Ku,this);var t=ac(this);try{e(Ec(Rc,t),Ec(Oc,t))}catch(_){Oc(t,_)}}).prototype,(Ku=function(e){uc(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new $u,rejection:!1,state:0,value:undefined})}).prototype=ft(sc,"then",function(e,t){var n=ac(this),r=pc(function(e,t){var n,e=R(e).constructor;if(e===undefined||Y(n=R(e)[Ou]))return t;e=n;if(Qt(e))return e;throw Eu(de(e)+" is not a constructor")}(this,cc));return n.parent=!0,r.ok=!O(e)||e,r.fail=O(t)&&t,r.domain=va?dc.domain:undefined,0==n.state?n.reactions.add(r):Wu(function(){vc(r,n)}),r.promise}),zu=function(){var e=new Ku,t=ac(e);this.promise=e,this.resolve=Ec(Rc,t),this.reject=Ec(Oc,t)},rc.f=pc=function(e){return e===cc||void 0===e?new zu:hc(e)},O(Gu)&&Ru!==Object.prototype)){Yu=Ru.then,y||ft(Ru,"then",function(e,t){var n=this;return new cc(function(e,t){m(Yu,n,e,t)}).then(e,t)},{unsafe:!0});try{delete Ru.constructor}catch(_){}Mn&&Mn(Ru,sc)}g({global:!0,constructor:!0,wrap:!0,forced:e},{Promise:cc}),kn(cc,"Promise",!1),h=re("Promise"),C=Ge.f,d&&h&&!h[po]&&C(h,po,{configurable:!0,get:function(){return this}});var ju=Hu.CONSTRUCTOR||!n(function(e){Gu.all(e).then(undefined,function(){})}),L=(g({target:"Promise",stat:!0,forced:ju},{all:function(e){var u=this,t=rc.f(u),c=t.resolve,s=t.reject,n=Xu(function(){var r=he(u.resolve),o=[],i=0,a=1;wr(e,function(e){var t=i++,n=!1;a++,m(r,u,e).then(function(e){n||(n=!0,o[t]=e,--a||c(o))},s)}),--a||c(o)});return n.error&&s(n.value),t.promise}}),Hu.CONSTRUCTOR),y=Gu&&Gu.prototype,e=(g({target:"Promise",proto:!0,forced:L,real:!0},{"catch":function(e){return this.then(undefined,e)}}),O(Gu)&&(Ru=re("Promise").prototype["catch"],y["catch"]!==Ru&&ft(y,"catch",Ru,{unsafe:!0})),g({target:"Promise",stat:!0,forced:ju},{race:function(e){var n=this,r=rc.f(n),o=r.reject,t=Xu(function(){var t=he(n.resolve);wr(e,function(e){m(t,n,e).then(r.resolve,o)})});return t.error&&o(t.value),r.promise}}),g({target:"Promise",stat:!0,forced:Hu.CONSTRUCTOR},{reject:function(e){var t=rc.f(this);return m(t.reject,undefined,e),t.promise}}),Hu.CONSTRUCTOR),Sc=(re("Promise"),g({target:"Promise",stat:!0,forced:e},{resolve:function(e){return e=e,R(t=this),l(e)&&e.constructor===t?e:((0,(t=rc.f(t)).resolve)(e),t.promise);var t}}),u.findIndex),xc=!0,Tc=("findIndex"in[]&&Array(1).findIndex(function(){xc=!1}),g({target:"Array",proto:!0,forced:xc},{findIndex:function(e){return Sc(this,e,1<arguments.length?arguments[1]:undefined)}}),ie("findIndex"),window.navigator.userAgent.toLowerCase()),A={},j=function(e){return-1!==Tc.indexOf(e)};A.macos=function(){return j("mac")},A.ios=function(){return A.iphone()||A.ipod()||A.ipad()},A.iphone=function(){return!A.windows()&&j("iphone")},A.ipod=function(){return j("ipod")},A.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return j("ipad")||e},A.android=function(){return!A.windows()&&j("android")},A.androidPhone=function(){return A.android()&&j("mobile")},A.androidTablet=function(){return A.android()&&!j("mobile")},A.blackberry=function(){return j("blackberry")||j("bb10")},A.blackberryPhone=function(){return A.blackberry()&&!j("tablet")},A.blackberryTablet=function(){return A.blackberry()&&j("tablet")},A.windows=function(){return j("windows")},A.windowsPhone=function(){return A.windows()&&j("phone")},A.windowsTablet=function(){return A.windows()&&j("touch")&&!A.windowsPhone()},A.fxos=function(){return(j("(mobile")||j("(tablet"))&&j(" rv:")},A.fxosPhone=function(){return A.fxos()&&j("mobile")},A.fxosTablet=function(){return A.fxos()&&j("tablet")},A.meego=function(){return j("meego")},A.cordova=function(){return window.cordova&&"file:"===location.protocol},A.nodeWebkit=function(){return"object"===Oo(window.process)},A.mobile=function(){return A.androidPhone()||A.iphone()||A.ipod()||A.windowsPhone()||A.blackberryPhone()||A.fxosPhone()||A.meego()},A.tablet=function(){return A.ipad()||A.androidTablet()||A.blackberryTablet()||A.windowsTablet()||A.fxosTablet()},A.desktop=function(){return!A.tablet()&&!A.mobile()};var Pc,Ic,Lc,Cc=!(A.isIE=function(){return"ActiveXObject"in window}),Ac=[],jc=window.XMLHttpRequest.prototype.send,kc=window.XMLHttpRequest.prototype.open,Nc=window.XMLHttpRequest.prototype.setRequestHeader,_c=window.fetch,Uc=function(t){Ac.find(function(e){return e.name===t.name})||(Ac.push(t),!Cc&&window.XMLHttpRequest&&(Cc=!0,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),this.sendByAegis)A.isIE()||(this.timeout=5e3);else for(var e=0;e<Ac.length;e++){var t=Ac[e];try{"function"==typeof t.open&&t.open(this)}catch(o){}}return kc.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0],t=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[e]=t,Nc.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<Ac.length;e++){var t=Ac[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(o){}}return jc.apply(this,arguments)}))},Dc=function(t){var e=Ac.findIndex(function(e){return e.name===t.name});-1!==e&&Ac.splice(e,1),window.XMLHttpRequest.prototype.send=jc,window.XMLHttpRequest.prototype.open=kc,window.XMLHttpRequest.prototype.setRequestHeader=Nc},Mc=!1,Fc=[],Hc=function(e){return e.split("\r\n").reduce(function(e,t){t=t.split(": ");return t[0]&&t[1]&&(e[t[0]]=t[1]),e},{})},qc=function(r,e,o){return null!=e&&e.length&&"object"===Oo(r)?e.reduce(function(e,t){var n=r instanceof Headers?r.get(t):r[t];return n?e+(""===e?"\n":"\n\n")+o+" header "+t+": "+n:e},""):""},Bc={sw8:function(e){e=e.split("-")[1];return e?atob(e):""},traceparent:function(e){return e.split("-")[1]},"sentry-trace":function(e){return e.split("-")[0]}},Wc=function(e){var t,n="";return"object"===Oo(e)&&(t=(e=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=e[r]||"function"==typeof e.get&&e.get(r);if(o)return[r,o]}return["",""]}(e,Object.keys(Bc)))[0],e=e[1],t&&(n=Bc[t](e))),n},h=(new I({name:"reportApiSpeed"}),new I({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},getRequestType:function(e,t,n){void 0===t&&(t="");var r,o,e="function"==typeof(null==(o=e.api)?void 0:o.resourceTypeHandler)?null==(o=e.api)?void 0:o.resourceTypeHandler(n):"";return"fetch"===e&&"static"===e||(r=void 0===t?"":t,o=(void 0===n?"":n).split("?")[0],e=aa.test(o)||ia.some(function(e){return-1!==String(r).indexOf(e)})?"static":"fetch"),e},overrideFetch:function(h){var g=this,e={name:this.name,then:function(s,f,l,d){var e,p;h.hostUrl&&-1<l.indexOf(h.hostUrl)||(e=s.headers?s.headers.get("content-type"):"",e=g.getRequestType(h,e,s.url),p={url:s.url,isHttps:oa(s.url),method:(null==d?void 0:d.method)||"get",duration:f,type:e,nextHopProtocol:"",status:s.status||0},"fetch"===e?s.clone().text().then(function(e){var t=s.status<=0||400<=s.status,n=(null==(n=h.api)?void 0:n.reqHeaders)||[],n=qc(null==d?void 0:d.headers,n,"req"),r=(null==(r=h.api)?void 0:r.resHeaders)||[],r=qc(s.headers,r,"res"),o=Wc(null==d?void 0:d.headers),i=ca(e,h.api,{url:l,ctx:s,payload:null==d?void 0:d.body}),a=i.code,i=i.isErr,u=null==(u=h.api)?void 0:u.apiDetail,c=u?sa(null==d?void 0:d.body,null==(c=h.api)?void 0:c.reqParamHandler,{url:l}):"",u=u?sa(e,null==(u=h.api)?void 0:u.resBodyHandler,{url:l,ctx:s}):"",e=(t?"FETCH_ERROR: "+e+" \n\n":"")+"fetch req url: "+l+" \n                                \nres status: "+(s.status||0)+" \n                                \nres duration: "+f+"ms \n                                \nreq method: "+((null==d?void 0:d.method)||"get")+" \n                                \nres retcode: "+a+"\n                                \nreq param: "+c+"\n                                \nres data: "+u+"\n                                "+n+"\n                                "+r;p.payload=null==d?void 0:d.body,p.ret=a,p.isErr=+i,g.publishNormalLog({msg:e,level:t?T.AJAX_ERROR:i?T.RET_ERROR:T.API_RESPONSE,code:a,trace:o}),g.publishSpeed(p)}):(Object.assign(p,{type:"static",urlQuery:ra(s.url,!0),domainLookup:zi.number,connectTime:zi.number}),g.publishSpeed(p)))},"catch":function(e,t,n,r){var o,i,a;if(!(h.hostUrl&&-1<n.indexOf(h.hostUrl)))throw o=g.getRequestType(h,"",n),o={url:n,isHttps:oa(n),method:(null==r?void 0:r.method)||"get",duration:t,nextHopProtocol:"",type:o,status:0},g.publishSpeed(o),o=(null==(o=h.api)?void 0:o.reqHeaders)||[],o=qc(null==r?void 0:r.headers,o,"req"),i=Wc(null==r?void 0:r.headers),a=null!=(a=h.api)&&a.apiDetail?sa(null==r?void 0:r.body,null==(a=h.api)?void 0:a.reqParamHandler,{url:n}):"",n="AJAX_ERROR: "+e+"\n                          \nreq url: "+n+"\n                          \nres status: 0\n                          \nres duration: "+t+"ms\n                          \nreq method: "+((null==r?void 0:r.method)||"get")+"\n                          \nreq param:"+a+"\n                          "+o,g.publishNormalLog({msg:n,level:T.AJAX_ERROR,code:-400,trace:i}),e}},t=(this.hackFetchOptions=e,this.hackFetchOptions);if(Fc.find(function(e){return e.name===t.name}))throw new Error("name '"+t.name+"' is already in hackFetch option list");Fc.push(t),!Mc&&window.fetch&&(Mc=!0,window.fetch=function(e,r){void 0===r&&(r={});for(var o="string"==typeof e?e:e.url,t=0;t<Fc.length;t++){var n=Fc[t];try{"function"==typeof n.beforeFetch&&n.beforeFetch(o,r)}catch(c){}}var i=Date.now();return _c(e,r).then(function(e){for(var t=0;t<Fc.length;t++){var n=Fc[t];try{"function"==typeof n.then&&n.then(e,Date.now()-i,o,r)}catch(c){}}return e})["catch"](function(e){for(var t=0;t<Fc.length;t++){var n=Fc[t];try{"function"==typeof n["catch"]&&n["catch"](e,Date.now()-i,o,r)}catch(c){}}throw e})})},overrideXhr:function(S){var x=this,e={name:this.name,send:function(E,O){var R=Date.now();E.addEventListener("loadend",function(){var e,r=E.aegisUrl||"";if(r&&!(S.hostUrl&&-1<r.indexOf(S.hostUrl))){var o=Date.now()-R,t=E.getResponseHeader("content-type"),t=x.getRequestType(S,t,r),i={url:r,isHttps:oa(r),status:E.status||0,method:E.aegisMethod||"get",type:t,nextHopProtocol:"",duration:o},n=(null==(n=S.api)?void 0:n.reqHeaders)||[],a=qc(E.aegisXhrReqHeader,n,"req"),n=(null==(n=S.api)?void 0:n.resHeaders)||[],u=Hc(E.getAllResponseHeaders()),c=qc(u,n,"res"),s=Wc(E.aegisXhrReqHeader),n=null==(u=S.api)?void 0:u.apiDetail,f=n?sa(O,null==(u=S.api)?void 0:u.reqParamHandler,{url:r}):"",l=n?sa(E.response,null==(e=S.api)?void 0:e.resBodyHandler,{url:r}):"";if("fetch"===t)try{var d,p,h,g,y=E.response,v=S.api,m={url:r,ctx:E,payload:O},b=function(e){var t=e.code,e=e.isErr,n="xhr req url: "+r+"\n                    \nres status: "+i.status+"\n                    \nres duration: "+o+"ms\n                    \nreq method: "+i.method+"\n                    \nres retcode: "+t+"\n                    \nreq param: "+f+"\n                    \nres data: "+l+"\n                    "+a+"\n                    "+c;i.ret=t,i.isErr=+e,i.payload=O,x.publishNormalLog({msg:n,level:e?T.RET_ERROR:T.API_RESPONSE,code:t,trace:s}),x.publishSpeed(i)};try{if("function"==typeof(null==v?void 0:v.retCodeHandlerAsync))return void v.retCodeHandlerAsync(y,null==m?void 0:m.url,null==m?void 0:m.ctx,function(e){var t=e.code,e=e.isErr;null!=b&&b({code:void 0===t?"unknown":t,isErr:e})});if("function"==typeof(null==v?void 0:v.retCodeHandler))return void(h=(p=v.retCodeHandler(y,null==m?void 0:m.url,null==m?void 0:m.ctx,null==m?void 0:m.payload)||{}).code,g=p.isErr,null!=b&&b({code:void 0===h?"unknown":h,isErr:g}));"string"==typeof y&&(y=JSON.parse(y)),"function"==typeof(null==(d=null==v?void 0:v.ret)?void 0:d.join)&&(ua=[].concat(v.ret.map(function(e){return e.toLowerCase()})));var w=Object.getOwnPropertyNames(y).filter(function(e){return-1!==ua.indexOf(e.toLowerCase())});if(w.length)return void(h=y[w[0]],null!=b&&b({code:""+h,isErr:0!==h&&"0"!==h}));null!=b&&b({code:"unknown",isErr:!1})}catch(e){null!=b&&b({code:"unknown",isErr:!1})}}catch(K){i.ret="unknown",x.publishSpeed(i)}else Object.assign(i,{type:"static",urlQuery:ra(r,!0),domainLookup:zi.number,connectTime:zi.number}),x.publishSpeed(i)}})}};this.hackXHROptions=e,Uc(this.hackXHROptions)},publishSpeed:function(n){var r=this;this.$walk(function(e){var t=r.$getConfig(e);"fetch"===n.type&&t&&"function"==typeof t.urlHandler?e.speedLogPipeline(E(E({},n),{url:ra(t.urlHandler(n.url,n.payload))})):(n.url=ra(n.url),e.speedLogPipeline(n))})},publishNormalLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){var t,e;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&Dc(this.option.hackXHROptions),this.option.hackFetchOptions&&(t=this.option.hackFetchOptions,-1!==(e=Fc.findIndex(function(e){return e.name===t.name}))&&Fc.splice(e,1),window.fetch=_c)}})),po=new I({name:"reportBridgeSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideBridge(e))},publishSpeed:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},overrideBridge:function(e){var u=this,c=Date.now(),s=e.config;s.reportBridgeSpeed&&s.h5Bridge&&s.h5BridgeFunc.length&&s.h5BridgeFunc.forEach(function(e){var a=s.h5Bridge[e];s.h5Bridge[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],o=e[1],n=e[2],i=e[3];a(r,o,n,function(e){var t=ca(e,s.api),n=t.code,t=t.isErr,n={url:r+"-"+o,name:r+"-"+o,duration:Date.now()-c,type:"bridge",ret:n,isErr:+t};u.publishSpeed(n),i(e)})}})}});B("match",function(r,u,c){return[function(e){var t=Z(this),n=Y(e)?undefined:ge(e,r);return n?m(n,e,t):new RegExp(e)[r](S(t))},function(e){var t=R(this),n=S(e),e=c(u,t,n);if(e.done)return e.value;if(!t.global)return ji(t,n);for(var r=t.unicode,o=[],i=t.lastIndex=0;null!==(a=ji(t,n));){var a=S(a[0]);""===(o[i]=a)&&(t.lastIndex=Si(n,bt(t.lastIndex),r)),i++}return 0===i?null:o}]}),(C=Pc=Pc||{})[C.unknown=100]="unknown",C[C.wifi=1]="wifi",C[C.net2g=2]="net2g",C[C.net3g=3]="net3g",C[C.net4g=4]="net4g",C[C.net5g=5]="net5g",C[C.net6g=6]="net6g",(n=Ic=Ic||{})[n.android=1]="android",n[n.ios=2]="ios",n[n.windows=3]="windows",n[n.macos=4]="macos",n[n.linux=5]="linux",n[n.other=100]="other",(L=Lc=Lc||{})[L.unknown=100]="unknown",L[L.normal=0]="normal",L[L.weak=1]="weak",L[L.disconnected=2]="disconnected";var Xc,$c,Gc,Vc,Jc,Kc,zc,Yc,Qc,Zc,es,ts,ns,rs,y=new I({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",Pc.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var t={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},e=Object.keys(t).find(function(e){return t[e].test(navigator.userAgent)});return e?Ic[e]:Ic.other},refreshNetworkTypeToBean:function(t){var n=this,e=t.config;e&&("function"==typeof e.getNetworkType?e.getNetworkType:os)(function(e){Pc[e]||(e=Pc.unknown),t.extendBean("netType",e),n.NetworkRefreshTimer=setTimeout(function(){n.refreshNetworkTypeToBean(t),clearTimeout(n.NetworkRefreshTimer)},1e4)})},refreshNetworkStatusToBean:function(t){var e,n=this,r=t.config;!r||null!=(e="function"==typeof r.getNetworkStatus?r.getNetworkStatus:e)&&e(function(e){Lc[e]===undefined&&(e=Lc.unknown),t.extendBean("netStatus",e),n.NetworkStatusRefreshTimer=setTimeout(function(){n.refreshNetworkStatusToBean(t),clearTimeout(n.NetworkStatusRefreshTimer)},1e4)})}}),os=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?Pc.net4g:0<=n.indexOf("wifi")?Pc.wifi:0<=n.indexOf("5g")?Pc.net5g:0<=n.indexOf("6g")?Pc.net6g:0<=n.indexOf("3g")?Pc.net3g:0<=n.indexOf("2g")?Pc.net2g:Pc.unknown))},is=window.WebSocket,as=[],us={construct:function(e,t){var a=new e(t[0],t[1]);return a.originSend=a.send,a.addEventListener("error",function(e){var e=(null==e?void 0:e.currentTarget)||{},t=e.url,n=e.readyState;null!=as&&as.forEach(function(e){e=e.onErr;null!=e&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})})}),Object.defineProperty(a,"send",{get:function(){return function(e){null!=(t=a.originSend)&&t.call(a,e);var e=a.readyState,t=WebSocket.OPEN,n=WebSocket.CLOSED,r=WebSocket.CONNECTING,o=WebSocket.CLOSING;if(e!==t){var i={readyState:e,connectUrl:a.url};switch(e){case n:as.forEach(function(e){e=e.sendErr;null!=e&&e(E({msg:"消息发送失败，连接已关闭！"},i))});break;case r:as.forEach(function(e){(0,e.sendErr)(E({msg:"消息发送失败，正在连接中！"},i))});break;case o:as.forEach(function(e){(0,e.sendErr)(E({msg:"消息发送失败，连接正在关闭！"},i))})}}}}}),a}},cs=new I({name:"onError"}),Ru=cs=new I({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(f){var e,t,n,r=this,o=window.onerror,i=(window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.publishErrorLog({msg:(la(e[0])||"")+" @ ("+(la(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+la(e[4]||""),level:T.ERROR}),null!=o&&o.call.apply(o,ri([window],e))},function(e){e=e&&la(e.reason);r.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:T.PROMISE_ERROR})}),a=(window.addEventListener("unhandledrejection",i),function(e){e=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement);if(e){var t=e.src||e.href,e=e.tagName;if("string"==typeof t&&e&&!(-1<window.location.href.indexOf(t))){var n={msg:e+" load fail: "+t,level:T.INFO};if(/\.js$/.test(t))n.level=T.SCRIPT_ERROR;else if(/\.css$/.test(t))n.level=T.CSS_ERROR;else switch(e.toLowerCase()){case"script":n.level=T.SCRIPT_ERROR;break;case"link":n.level=T.CSS_ERROR;break;case"img":n.level=T.IMAGE_ERROR;break;case"audio":case"video":n.level=T.MEDIA_ERROR;break;default:return}r.publishErrorLog(n)}}}),l=(window.document.addEventListener("error",a,!0),f.lifeCycle.on("destroy",function(){0===cs.countInstance()&&(window.document.removeEventListener("unhandledrejection",i),window.document.removeEventListener("error",a,!0))}),this),u={name:this.name,send:function(c,s){c.addEventListener("loadend",function(){var e,t,n,r,o,i,a,u="";this.failType?u=this.failType:this.status?400<=this.status&&(u="error"):u="failed",f.config.hostUrl&&this.aegisUrl&&-1<this.aegisUrl.indexOf(f.config.hostUrl)||!u||(e=c.aegisUrl,t=(null==(t=f.config.api)?void 0:t.reqHeaders)||[],t=qc(c.aegisXhrReqHeader,t,"req"),r=(null==(r=f.config.api)?void 0:r.resHeaders)||[],n=Hc(c.getAllResponseHeaders()),n=qc(n,r,"res"),r=Wc(c.aegisXhrReqHeader),o=ca(c.response,f.config.api,{url:e,ctx:c,payload:s}).code,i=(a=null==(a=f.config.api)?void 0:a.apiDetail)?sa(s,null==(i=f.config.api)?void 0:i.reqParamHandler,{url:e}):"",a=a?sa(c.responseType&&"text"!==c.responseType&&"json"!==c.responseType?"":pa(c.response),null==(a=f.config.api)?void 0:a.resBodyHandler,{url:e}):"",l.publishErrorLog({msg:"AJAX_ERROR: request "+u+"\n                      \nreq url: "+this.aegisUrl+"\n                      \nres status: "+(this.status||0)+"\n                      \nres duration: "+(Date.now()-c.aegisXhrStartTime)+"ms\n                      \nres retcode: "+o+"\n                      \nreq method: "+this.aegisMethod+"\n                      \nreq param: "+i+"\n                      \nres data: "+a+"\n                      "+t+"\n                      "+n,level:T.AJAX_ERROR,trace:r}))}),c.addEventListener("timeout",function(){c.failType="timeout"}),c.addEventListener("error",function(){c.failType="error"}),c.addEventListener("abort",function(){c.failType="abort"})}};this.hackXHROptions=u,Uc(this.hackXHROptions),f.config.websocketHack&&(u={key:f.config.id+"-"+this.name,onErr:function(e){var t;null!=(t=r.publishWsErrorLog)&&t.call(r,e)},sendErr:function(e){var t;null!=(t=r.publishWsErrorLog)&&t.call(r,e)}},this.hackWebsocketConfig=u,u=this.hackWebsocketConfig,window.Proxy&&window.WebSocket&&(e=window.WebSocket,window&&!e.isHack&&(t=new Proxy(WebSocket,us),e.isHack=!0,window.WebSocket=t),n=u,as.find(function(e){return e.key===n.key})||n&&as.push(n)))},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},publishWsErrorLog:function(e){var t=e.connectUrl,n=e.msg,e=e.readyState;this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+t+"\n              readyState: "+e+"\n              msg: "+n,level:T.WEBSOCKET_ERROR})},destroy:function(){var t,e;this.option.publishErrorLog=function(){},this.option.hackXHROptions&&Dc(this.option.hackXHROptions),this.option.hackWebsocketConfig&&(t=this.option.hackWebsocketConfig,window.WebSocket=is,-1!==(e=as.findIndex(function(e){return e.key===t.key}))&&as.splice(e,1))}}),ss=(new I({name:"pagePerformance"}),function(e,t,n,r){return void 0===n&&(n=3e4),void 0===r&&(r=0),(t=void 0===t?0:t)<=e&&e<=n?e:r}),ju=new I({name:"pagePerformance",onNewAegis:function(e){mu()&&(Xc?this.publish(Xc,e):this.startCalcPerformance(e))},publish:function(e,a){var u=this;a.sendPipeline([function(e,t){var n,r=[];for(n in e)r.push(n+"="+e[n]);var o,i=u.$getConfig(a);if(i)return o=-1===a.config.performanceUrl.indexOf("?")?"?":"&","function"==typeof i.urlHandler?t({url:a.config.performanceUrl+o+r.join("&")+"&from="+(encodeURIComponent(i.urlHandler())||window.location.href),beanFilter:["from"],type:x.PERFORMANCE,log:e}):t({url:a.config.performanceUrl+o+r.join("&"),type:x.PERFORMANCE,log:e})}],x.PERFORMANCE)(e)},startCalcPerformance:function(n){var r=this;try{this.getFirstScreenTiming(n,function(e){var t=performance.timing;t&&(Xc={dnsLookup:ss(t.domainLookupEnd-t.domainLookupStart),tcp:ss(t.connectEnd-t.connectStart),ssl:ss(0===t.secureConnectionStart?0:t.requestStart-t.secureConnectionStart),ttfb:ss(t.responseStart-t.requestStart),contentDownload:ss(t.responseEnd-t.responseStart),domParse:ss(t.domInteractive-t.domLoading,0,3e4,1070),resourceDownload:ss(t.loadEventStart-t.domInteractive,0,3e4,1070),firstScreenTiming:ss(Math.floor(e),0,6e4)},(t=n.config).extraPerformanceData&&"{}"!==JSON.stringify(t.extraPerformanceData)&&(t=(e=t.extraPerformanceData).engineInit,e=e.bundleLoad,Xc=E(E({},Xc),{engineInit:ss(t,0,1e4),bundleLoad:ss(e,0,1e4)})),r.publish(Xc,n))})}catch(o){}},getFirstScreenTiming:function(e,t){null!=t&&t(0)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t,n;return!(!e||"function"!=typeof e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth,0<=e.left&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height)},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var r=0;r<n.length;r++)t+=this.walkAndCount(n[r])}return t}}),fs=(Kc={passive:!0,capture:!0},zc=new Date,Hu=function(){Jc=[],Gc=-1,$c=null,es(addEventListener)},Yc=function(e,t){$c||($c=t,Gc=e,Vc=new Date,es(removeEventListener),Qc())},Qc=function(){var t;0<=Gc&&Gc<Vc-zc&&(t={entryType:"first-input",name:$c.type,target:$c.target,cancelable:$c.cancelable,startTime:$c.timeStamp,processingStart:$c.timeStamp+Gc},Jc.forEach(function(e){e(t)}),Jc=[])},Zc=function(e){var t,n,r,o,i,a;e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,o=function(){Yc(n,r),a()},i=function(){a()},a=function(){removeEventListener("pointerup",o,Kc),removeEventListener("pointercancel",i,Kc)},addEventListener("pointerup",o,Kc),addEventListener("pointercancel",i,Kc)):Yc(t,e))},es=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,Zc,Kc)})},ts="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",function D(e){"hidden"===document.visibilityState&&(ts=e.timeStamp,removeEventListener("visibilitychange",D,!0))},!0),Hu(),self.webVitals={firstInputPolyfill:function(e){Jc.push(e),Qc()},resetFirstInputPolyfill:Hu,get firstHiddenTime(){return ts}},new I({name:"webVitals"}),0),k=(ni(rs=N,e=ns=w),rs.prototype=null===e?Object.create(e):(ms.prototype=e.prototype,new ms),N.prototype.getBean=function(t){var n=this;return void 0===t&&(t=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(e){return-1===t.indexOf(e)}).map(function(e){return"from"===e?"from="+n.getCurrentPageUrl():e+"="+n.bean[e]}).join("&")},N.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href;return"function"==typeof this.config.urlHandler&&(e=this.config.urlHandler()),encodeURIComponent(e)},N.prototype.ready=function(){var t=this;!function N(){var e,n,r,o;t.reportRequestQueue.length&&(e=t.reportRequestQueue.splice(0,1)[0],n=e.options,r=e.success,o=e.fail,t.$request(n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return null==r?void 0:r.apply(n,e)}finally{N()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return null==o?void 0:o.apply(n,e)}finally{N()}}))}(),this.isReportReady=!0},N.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},N.prototype.$request=function(e,t,n){var r,o,i,a;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)return a=e.url,!1!==e.addBean&&(a=a+(-1===a.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=a,a=e.method||"get",(e=(o=this.config.onBeforeRequest)?o(e,this):e)?e.url?void((null!=e&&e.sendBeacon||this.sendNow)&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(e.url,e.data):((r=new XMLHttpRequest).sendByAegis=!0,r.addEventListener("readystatechange",function(){4===r.readyState&&(400<=r.status||0===r.status?null!=n&&n(r.response):null!=t&&t(r.response))}),"get"===a.toLocaleLowerCase()?(r.open("get",(o=e.url,i=e.data,"string"!=typeof o?"":"object"===Oo(i)&&i?(a=Object.getOwnPropertyNames(i).map(function(e){var t=i[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))}).join("&").replace(/eval/gi,"evaI"),o+(-1===o.indexOf("?")?"?":"&")+a):o)),r.send()):(r.open("post",e.url),e.contentType&&r.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),r.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},N.useAsyncPlugin=function(a,e){var u,c=void 0===(u=(e=void 0===e?{}:e).exportsConstructor)?"aegis-plugin-"+fs:u,t=e.onAegisInit,s=void 0===t?function(){}:t,t=e.onAegisInitAndPluginLoaded,f=void 0===t?function(){}:t;if(fs+=1,"string"!=typeof a)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof s||"function"!=typeof f)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new I({name:"asyncPlugin",onNewAegis:function(t){try{s(t),N.asyncPlugin[a]?f(t,window[N.asyncPlugin[a]]):(e=a,n=c,r=function(e){e||(N.asyncPlugin[a]=c,e=window[c],f(t,e))},o=document.createElement("script"),i=document.head,"function"==typeof n&&(r=n,n=""),o.src=e,o.setAttribute("name",n),o.name=n,o.setAttribute("crossorigin","anonymous"),o.crossorigin="anonymous",o.defer=!0,o.hasLoaded=!1,o.onreadystatechange=function(){o.hasLoaded||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(o.hasLoaded=!0,"function"==typeof r&&r(!1),setTimeout(function(){i.contains(o)&&i.removeChild(o)}))},o.onload=o.onreadystatechange,o.onerror=function(){"function"==typeof r&&r(!0),setTimeout(function(){i.contains(o)&&i.removeChild(o)})},"complete"===document.readyState?i.appendChild(o):window.addEventListener("load",function(){i.appendChild(o)}))}catch(u){console.log("error on below is caused by "+a+" "),console.error(u)}var e,n,r,o,i}}))},N.prototype.publishPluginsLogs=function(){var e=N.installedPlugins.find(function(e){return"reportAssetSpeed"===e.name});null!=e&&e.option.collectNotReportedLog(this)},N.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},N.sessionID="session-"+Date.now(),N.asyncPlugin={},N.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js"},N),ls=new I({name:"offlineLog"}),ds=function(e,h){var g=[],y=null,v=null,m=function(e){v=e},b=function(e){g=g.concat(e)},w=function(e,t){y={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}};k.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",b),e.lifeCycle.on("uploadLogs",w),e.lifeCycle.on("onConfigChange",m)},onAegisInitAndPluginLoaded:function(r,e){var t,n,o,i,a,u,c=h.dbConfig,c=void 0===c?{}:c,s=h.url,s=void 0===s?k.urls.aegisCollect:s,f=h.offlineLogExp,f=void 0===f?3:f,l=h.id,d=h.uin,s=(null!=(t=r.lifeCycle)&&t.remove("beforeWrite",b),null!=(t=r.lifeCycle)&&t.remove("uploadLogs",w),null!=(t=r.lifeCycle)&&t.remove("onConfigChange",m),Object.assign({lookupUrl:s+"/offlineAuto?id="+l,preservedDay:f,id:l,uin:d,aid:(null==(t=r.bean)?void 0:t.aid)||"",beforeRequest:r.config.beforeRequest,afterRequest:r.config.afterRequest},c,{sessionId:k.sessionID}));try{var p=new e(s);g.forEach(function(e){p.add(E(E({},e),{level:e.level===T.INFO_ALL?T.INFO:e.level}))}),null!=(n=r.lifeCycle)&&n.on("beforeWrite",function(e){(e=void 0===e?[]:e).forEach(function(e){p.add(E(E({},e),{level:e.level===T.INFO_ALL?T.INFO:e.level}))})}),null!=(o=r.lifeCycle)&&o.on("uploadLogs",function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),p.uploadLogs(Object.assign({id:h.id,uin:h.uin,aid:null==(n=r.bean)?void 0:n.aid},e),t)}),null!=(i=r.lifeCycle)&&i.on("onConfigChange",function(e){p.setConfig(e)}),null!=(a=r.lifeCycle)&&a.on("destroy",function(){0===ls.countInstance()&&(g.length=0,"function"==typeof((y=null)==p?void 0:p.destroy)&&p.destroy())}),p.on("PERREVENT",function(e){r.sendPipeline([function(e,t){n={msg:la(e),level:T.INFO};var n=(n=Array.isArray(n)?n:[n]).map(function(t,n){return Object.getOwnPropertyNames(t).map(function(e){return Zi(e)+"["+n+"]="+(t[e]===undefined?"":Zi(t[e]))}).join("&")}).join("&")+(n.length?"&count="+n.length:"");t({type:x.OFFLINE,data:n,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:h.url+"?id=893&sessionId="+k.sessionID+"&uin="+h.uin+"&from="+h.id+"&count=1&version=1.36.5",log:e})}],x.OFFLINE)(e)}),v&&(p.setConfig(v),v=null),y&&(null!=(u=r.lifeCycle)&&u.emit("uploadLogs",y.conds,y.params),y=null),r.flog=p}catch(Z){console.log(Z)}}})},u=ls=new I({name:"offlineLog",onNewAegis:function(e){ds(k.urls.flog,e.config)}}),ie=(new I({name:"spa"}),new I({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=(null==(e=location.href)?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(n){var r=history[n],e="__"+n+"__hasWrittenByTamSpa";return"function"==typeof r&&!history[e]&&(Object.defineProperty(history,e,{value:!0,enumerable:!1}),function(){var e=r.apply(this,arguments),t=null;return"function"==typeof Event?t=new Event(n):(t=document.createEvent("HTMLEvents")).initEvent(n,!1,!0),window.dispatchEvent(t),e})},sendPv:function(){var t=this;setTimeout(function(){var r=location.href,e=(null==(e=location.href)?void 0:e.split("?"))[0];e&&e!==t.$fireUrl&&(t.$walk(function(n){n.sendPipeline([function(e,t){t({url:n.config.pvUrl+"?from="+encodeURIComponent(r),beanFilter:["from"],type:x.PV})}],x.PV)(null)}),t.$fireUrl=e)},0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}})),B=(new I({name:"ie"}),new I({name:"ie",init:function(){this.overrideAegisSend(),this.startListen()},startListen:function(){var n=this,r=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.publishErrorLog({msg:(e[0]||"")+" @ ("+(e[1]||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+la(e[4]||""),level:T.ERROR}),null!=r&&r.call.apply(r,ri([window],e))}},overrideAegisSend:function(){k.prototype.request=function(e,t,n){var r,o,i=this;e&&"string"==typeof e.url&&""!==e.url&&this.bean.id&&(r=e.url,!1!==e.addBean&&(r=r+(-1===r.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),(o=new Image).onload=function(){i.request(e,t,n),null!=t&&t(null)},o.onerror=function(){i.request(e,t,n),null!=n&&n(null)},e.data?o.src=r+"&"+e.data:o.src=r)}},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){this.option.publishErrorLog=function(){}}})),C=(new I({name:"onClose"}),new I({name:"onClose",onNewAegis:function(){var t,n,e,r,o=this;A.desktop()?(r=window.onunload,window.onunload=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.publishNotReportedLog(),null!=r&&r.call.apply(r,ri([window],e))}):(t=this.publishNotReportedLog.bind(this),n=!0,e=function v(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),n&&(removeEventListener("visibilitychange",v,!0),removeEventListener("pagehide",v,!0)))},addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},publishNotReportedLog:function(){var t=this;this.$walk(function(e){e.sendNow=!0,e.publishPluginsLogs(),t.publishThrottlePipeLogs(e)})},publishThrottlePipeLogs:function(e){null!=e&&e.speedLogPipeline([]),null!=e&&e.eventPipeline([]),null!=e&&e.customTimePipeline([]),null!=e&&e.normalLogPipeline([])}})),ps=a.trim,hs=v.parseInt,n=v.Symbol,gs=n&&n.iterator,ys=/^[+-]?0x/i,vs=s(ys.exec),L=8!==hs(p+"08")||22!==hs(p+"0x16")||gs&&!c(function(){hs(Object(gs))})?function(e,t){e=ps(S(e));return hs(e,t>>>0||(vs(ys,e)?16:10))}:hs;function N(e){var t,n,r,o,i,u=ns.call(this,e)||this;u.sendNow=!1,u.isReportReady=!1,u.reportRequestQueue=[],u.speedLogPipeline=Na([Sa(u),(o=u.config,i={},function(e,t){var n,r;o.speedSample?(r="object"===Oo(o.repeat)?o.repeat:{repeat:o.repeat},n=+r.speed||+r.repeat||5,Array.isArray(e)?(r=e.filter(function(e){var t=!i[e.url]||i[e.url]<n;return i[e.url]=1+~~i[e.url],t})).length&&t(r):(!i[e.url]||i[e.url]<n)&&(i[e.url]=1+~~i[e.url],t(e))):t(e)}),(r=u,function(t,n){os(function(e){r.extendBean("netType",e),n(t)})}),function(e,t){u.lifeCycle.emit("beforeReportSpeed",e);var n=u.config.beforeReportSpeed;if((e="function"==typeof n?e.filter(function(e){return!1!==n(e)}):e).length)return t(e)},function(e){return u.sendPipeline([function(e,t){var n,r,o,i,a;t({type:x.SPEED,url:""+u.config.speedUrl,method:"post",data:(n=e,r=E(E({},u.bean),{from:u.getCurrentPageUrl()}),i={fetch:[],"static":[],bridge:[]},a=new FormData,Array.isArray(n)?n.forEach(function(e){var t=vu(e);i[e.type].push(t)}):(o=vu(n),i[n.type].push(o)),a.append("payload",da(E({duration:i},r))),a),log:e})}],x.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!=(t=document.cookie.match(/\buin=\D+(\d*)/))?t:[])[1]||(null!=(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))?n:[])[1]||""),u.init(e),u.extendBean("sessionId",N.sessionID),u.extendBean("from",u.getCurrentPageUrl()),"undefined"!=typeof document&&u.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&u.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&u.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&u.extendBean("ext3",encodeURIComponent(e.ext3))}catch(d){console.warn(d),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),u.sendSDKError(d)}return u}function ms(){this.constructor=rs}return g({global:!0,forced:parseInt!=L},{parseInt:L}),new I({name:"aid"}),k.use(Ru),k.use(h),k.use(r),k.use(ju),k.use(co),k.use(y),k.use(u),k.use(ie),k.use(B),k.use(C),k.use(po),k});

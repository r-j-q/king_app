var __getOwnPropNames = Object.getOwnPropertyNames;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};

// <define:process.env.UNI_STAT_TITLE_JSON>
var init_define_process_env_UNI_STAT_TITLE_JSON = __esm({
  "<define:process.env.UNI_STAT_TITLE_JSON>"() {
  }
});

// <define:process.env.UNI_STAT_UNI_CLOUD>
var init_define_process_env_UNI_STAT_UNI_CLOUD = __esm({
  "<define:process.env.UNI_STAT_UNI_CLOUD>"() {
  }
});

// C:/Users/xbgg0/Documents/HBuilderProjects/测试/node_modules/aegis-weex-sdk/lib/aegis.min.js
var require_aegis_min = __commonJS({
  "C:/Users/xbgg0/Documents/HBuilderProjects/\u6D4B\u8BD5/node_modules/aegis-weex-sdk/lib/aegis.min.js"(exports, module) {
    init_define_process_env_UNI_STAT_TITLE_JSON();
    init_define_process_env_UNI_STAT_UNI_CLOUD();
    !function(e, t) {
      typeof exports == "object" && typeof module != "undefined" ? module.exports = t() : typeof define == "function" && define.amd ? define(t) : (e = typeof globalThis != "undefined" ? globalThis : e || self).Aegis = t();
    }(exports, function() {
      "use strict";
      var n = function(e2, t2) {
        return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
          e3.__proto__ = t3;
        } || function(e3, t3) {
          for (var n2 in t3)
            Object.prototype.hasOwnProperty.call(t3, n2) && (e3[n2] = t3[n2]);
        })(e2, t2);
      }, u = function() {
        return (u = Object.assign || function(e2) {
          for (var t2, n2 = 1, i2 = arguments.length; n2 < i2; n2++)
            for (var o2 in t2 = arguments[n2])
              Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
          return e2;
        }).apply(this, arguments);
      };
      function s(e2, s2, l2, a2) {
        return new (l2 = l2 || Promise)(function(n2, t2) {
          function i2(e3) {
            try {
              r2(a2.next(e3));
            } catch (e4) {
              t2(e4);
            }
          }
          function o2(e3) {
            try {
              r2(a2.throw(e3));
            } catch (e4) {
              t2(e4);
            }
          }
          function r2(e3) {
            var t3;
            e3.done ? n2(e3.value) : ((t3 = e3.value) instanceof l2 ? t3 : new l2(function(e4) {
              e4(t3);
            })).then(i2, o2);
          }
          r2((a2 = a2.apply(e2, s2 || [])).next());
        });
      }
      function f(i2, o2) {
        var r2, s2, l2, a2 = { label: 0, sent: function() {
          if (1 & l2[0])
            throw l2[1];
          return l2[1];
        }, trys: [], ops: [] }, e2 = { next: t2(0), throw: t2(1), return: t2(2) };
        return typeof Symbol == "function" && (e2[Symbol.iterator] = function() {
          return this;
        }), e2;
        function t2(n2) {
          return function(e3) {
            var t3 = [n2, e3];
            if (r2)
              throw new TypeError("Generator is already executing.");
            for (; a2; )
              try {
                if (r2 = 1, s2 && (l2 = 2 & t3[0] ? s2.return : t3[0] ? s2.throw || ((l2 = s2.return) && l2.call(s2), 0) : s2.next) && !(l2 = l2.call(s2, t3[1])).done)
                  return l2;
                switch (s2 = 0, (t3 = l2 ? [2 & t3[0], l2.value] : t3)[0]) {
                  case 0:
                  case 1:
                    l2 = t3;
                    break;
                  case 4:
                    return a2.label++, { value: t3[1], done: false };
                  case 5:
                    a2.label++, s2 = t3[1], t3 = [0];
                    continue;
                  case 7:
                    t3 = a2.ops.pop(), a2.trys.pop();
                    continue;
                  default:
                    if (!((l2 = 0 < (l2 = a2.trys).length && l2[l2.length - 1]) || t3[0] !== 6 && t3[0] !== 2)) {
                      a2 = 0;
                      continue;
                    }
                    if (t3[0] === 3 && (!l2 || t3[1] > l2[0] && t3[1] < l2[3]))
                      a2.label = t3[1];
                    else if (t3[0] === 6 && a2.label < l2[1])
                      a2.label = l2[1], l2 = t3;
                    else {
                      if (!(l2 && a2.label < l2[2])) {
                        l2[2] && a2.ops.pop(), a2.trys.pop();
                        continue;
                      }
                      a2.label = l2[2], a2.ops.push(t3);
                    }
                }
                t3 = o2.call(i2, a2);
              } catch (e4) {
                t3 = [6, e4], s2 = 0;
              } finally {
                r2 = l2 = 0;
              }
            if (5 & t3[0])
              throw t3[1];
            return { value: t3[0] ? t3[1] : void 0, done: true };
          };
        }
      }
      function l() {
        for (var e2 = 0, t2 = 0, n2 = arguments.length; t2 < n2; t2++)
          e2 += arguments[t2].length;
        for (var i2 = Array(e2), o2 = 0, t2 = 0; t2 < n2; t2++)
          for (var r2 = arguments[t2], s2 = 0, l2 = r2.length; s2 < l2; s2++, o2++)
            i2[o2] = r2[s2];
        return i2;
      }
      Object.assign || Object.defineProperty(Object, "assign", { enumerable: false, configurable: true, writable: true, value: function(e2) {
        if (e2 == null)
          throw new TypeError("Cannot convert first argument to object");
        for (var t2 = Object(e2), n2 = 1; n2 < arguments.length; n2++)
          if ((i2 = arguments[n2]) != null)
            for (var i2 = Object(i2), o2 = Object.keys(Object(i2)), r2 = 0, s2 = o2.length; r2 < s2; r2++) {
              var l2 = o2[r2], a2 = Object.getOwnPropertyDescriptor(i2, l2);
              a2 != null && a2.enumerable && (t2[l2] = i2[l2]);
            }
        return t2;
      } });
      var i, p = ["ext1", "ext2", "ext3", "level", "trace", "tag", "seq", "code"], D = (e.prototype.indexOf = function(e2, t2) {
        for (var n2 = 0; n2 < e2.length; n2++)
          if (e2[n2].callback === t2)
            return n2;
        return -1;
      }, e.prototype.on = function(e2, t2, n2) {
        var i2;
        if (n2 === void 0 && (n2 = 0), this)
          return (i2 = this.eventsList[e2]) || (this.eventsList[e2] = [], i2 = this.eventsList[e2]), this.indexOf(i2, t2) === -1 && i2.push({ name: e2, type: n2 || 0, callback: t2 }), this;
      }, e.prototype.one = function(e2, t2) {
        this.on(e2, t2, 1);
      }, e.prototype.remove = function(e2, t2) {
        if (this) {
          var n2 = this.eventsList[e2];
          if (n2) {
            if (t2)
              return n2.length && (t2 = this.indexOf(n2, t2), n2.splice(t2, 1)), this;
            try {
              delete this.eventsList[e2];
            } catch (e3) {
            }
          }
          return null;
        }
      }, e.prototype.clear = function() {
        this.eventsList = {};
      }, e), k = function(e2) {
        if (!e2 || e2.length === 0)
          return "{}";
        e2 = Array.isArray(e2) ? e2 : [e2];
        var t2 = Object.keys(e2[0]), n2 = {}, i2 = (t2.forEach(function(t3) {
          n2[t3] = e2.map(function(e3) {
            return e3[t3];
          });
        }), n2.count = e2.length, n2);
        if (typeof i2 == "string")
          return i2;
        try {
          return JSON.stringify(i2, r()) || "undefined";
        } catch (i3) {
          return "error happen when aegis stringify: \n " + i3.message + " \n " + i3.stack;
        }
      };
      function e() {
        var s2 = this;
        this.emit = function(e2, t2) {
          if (s2) {
            var n2;
            if ((i2 = s2.eventsList[e2]) != null && i2.length)
              for (var i2 = i2.slice(), o2 = 0; o2 < i2.length; o2++) {
                n2 = i2[o2];
                try {
                  var r2 = n2.callback.apply(s2, [t2]);
                  if (n2.type === 1 && s2.remove(e2, n2.callback), r2 === false)
                    break;
                } catch (e3) {
                  throw e3;
                }
              }
            return s2;
          }
        }, this.eventsList = {};
      }
      (L = i = i || {})[L.number = -1] = "number", L.string = "";
      function d(e2) {
        return typeof e2 == "string" && e2.startsWith("//") ? typeof location != "undefined" && location.protocol === "https:" : /^https/.test(e2);
      }
      function h(e2, t2, n2) {
        try {
          var i2 = typeof t2 == "function" ? t2(e2, n2 == null ? void 0 : n2.url) || "" : e2;
          return P(i2).slice(0, 102400);
        } catch (e3) {
          return "";
        }
      }
      function m(n2, i2) {
        var o2, r2 = [], s2 = n2.config;
        return n2.lifeCycle.on("destroy", function() {
          r2.length = 0;
        }), function(e2, t2) {
          Array.isArray(e2) ? r2 = r2.concat(e2) : r2.push(e2), i2 && r2.length >= i2 || n2.sendNow && 0 < r2.length ? (r2 = G(r2), t2(r2.splice(0, r2.length)), o2 && clearTimeout(o2)) : (o2 && clearTimeout(o2), o2 = setTimeout(function() {
            o2 = null, 0 < (r2 = G(r2)).length && t2(r2.splice(0, r2.length));
          }, s2.delay));
        };
      }
      function q(e2, t2) {
        return Array.isArray(e2) ? t2(e2.map(function(e3) {
          return t3 = u(u({}, e3), { msg: typeof e3.msg == "string" ? e3.msg : [].concat(e3.msg).map(E).join(" ") }), p.forEach(function(e4) {
            t3[e4] || delete t3[e4];
          }), t3;
          var t3;
        })) : t2([u(u({}, e2), { msg: typeof e2.msg == "string" ? e2.msg : E(e2.msg) })]);
      }
      function F(a2, c2) {
        return function(e2, t2) {
          var n2, i2, o2, r2 = Array.isArray(e2), s2 = r2 ? e2 : [e2], l2 = (a2.lifeCycle.emit("beforeRequest", e2), a2.config.beforeRequest);
          (s2 = typeof l2 == "function" ? s2.map(function(e3) {
            try {
              var t3 = l2({ logs: e3, logType: c2 });
              return (t3 == null ? void 0 : t3.logType) === c2 && t3 != null && t3.logs ? t3.logs : t3 !== false && e3;
            } catch (t4) {
              return e3;
            }
          }).filter(function(e3) {
            return e3 !== false;
          }) : s2).length && (n2 = s2, e2 = p, !Array.isArray(n2) || n2.length <= 1 || (i2 = [], o2 = [], !(o2 = typeof e2 == "string" ? [e2] : e2) || o2.length <= 0 || (o2.forEach(function(t3) {
            n2.forEach(function(e3) {
              e3 != null && e3[t3] && i2.push(t3);
            });
          }), 0 < i2.length && (n2 = n2.map(function(e3) {
            var t3 = {};
            return i2.forEach(function(e4) {
              t3[e4] = "";
            }), u(u({}, t3), e3);
          })))), s2 = n2, t2(r2 ? s2 : s2[0]));
        };
      }
      function a(o2) {
        return function(e2, t2) {
          o2.lifeCycle.emit("modifyRequest", e2);
          var n2 = o2.config.modifyRequest;
          if (typeof n2 == "function")
            try {
              var i2 = n2(e2);
              typeof i2 == "object" && "url" in i2 && (e2 = i2);
            } catch (e3) {
              console.error(e3);
            }
          t2(e2);
        };
      }
      function c(i2) {
        return function(e2, t2) {
          i2.lifeCycle.emit("afterRequest", e2);
          var n2 = i2.config.afterRequest;
          typeof n2 == "function" && n2(e2) === false || t2(e2);
        };
      }
      function v(n2) {
        if (n2 && n2.reduce && n2.length)
          return n2.length === 1 ? function(e2, t2) {
            n2[0](e2, t2 || K);
          } : n2.reduce(function(n3, i2) {
            return function(e2, t2) {
              return t2 === void 0 && (t2 = K), n3(e2, function(e3) {
                return i2 == null ? void 0 : i2(e3, t2);
              });
            };
          });
        throw new TypeError("createPipeline need at least one function param");
      }
      function g(t2, n2) {
        Object.getOwnPropertyNames(t2).forEach(function(e2) {
          typeof t2[e2] == "function" && e2 !== "constructor" && (n2 ? n2[e2] = e2 === "sendPipeline" ? function() {
            return function() {
            };
          } : function() {
          } : t2[e2] = function() {
          });
        });
      }
      function o(n2) {
        var t2, e2 = this, i2 = (r2 = n2.config).uin, o2 = r2.id, r2 = r2.offlineLogLimit;
        i2 && o2 && (t2 = new H({ limit: r2 === void 0 ? 2e4 : r2 }), n2.lifeCycle.on("beforeWrite", function(e3) {
          t2.save2Offline(e3 = e3 === void 0 ? [] : e3, n2.config);
        }), n2.getOfflineLog = function() {
          var e3 = t2.getLogs({ uin: i2, id: o2 });
          return t2.clearLogs(), e3;
        }, n2.uploadOfflineLogs = function(t3) {
          return s(e2, void 0, void 0, function() {
            return f(this, function(e3) {
              return t3 = Array.isArray(t3) ? t3 : [t3], [2, function(a2, c2) {
                return s(this, void 0, void 0, function() {
                  var t4, n3, i3, o3, r3, s2, l2;
                  return f(this, function(e4) {
                    return t4 = a2.config, n3 = a2.bean, i3 = t4.offlineUrl, o3 = t4.id, r3 = t4.uin, s2 = (n3 || {}).aid, l2 = s2 === void 0 ? "" : s2, (r3 || l2) && o3 ? (a2.send({ url: i3 + "/offlineAuto", type: O.OFFLINE, log: O.OFFLINE }, function(e5) {
                      var t5 = (e5 == null ? void 0 : e5.data).secretKey;
                      if (t5)
                        try {
                          a2.send({ url: i3 + "/offlineLog", data: { logs: c2, secretKey: t5, id: o3, uin: r3, aid: l2 }, contentType: "application/json", method: "post", type: O.OFFLINE, log: O.OFFLINE });
                        } catch (e6) {
                          console.error(e6);
                        }
                    }, function(e5) {
                      console.error(e5);
                    }), [2]) : [2];
                  });
                });
              }(n2, t3)];
            });
          });
        });
      }
      function H(e2) {
        var i2 = this, e2 = (e2 = (e2 === void 0 ? {} : e2).limit) === void 0 ? 2e4 : e2;
        this.offlineBuffer = [], this.clearLogs = function() {
          i2.offlineBuffer = [];
        }, this.save2Offline = function(e3, t2) {
          e3 = (e3 = Array.isArray(e3) ? e3 : [e3]).map(function(e4) {
            return typeof e4 == "string" && (e4 = { msg: e4 }), Object.assign({ id: t2.id, uin: t2.uin, time: +Date.now(), version: t2.version }, e4);
          });
          i2.offlineBuffer = i2.offlineBuffer.concat(e3).slice(0, i2.limitSize);
        }, this.getLogs = function(t2, e3) {
          var n2 = i2.offlineBuffer.filter(function(e4) {
            return e4.id === t2.id && e4.uin === t2.uin;
          });
          return e3 != null && e3(n2), n2;
        }, this.limitSize = e2;
      }
      function y(e2, i2) {
        return i2 === void 0 && (i2 = {}), new Promise(function(t2, n2) {
          C || n2(new Error("no available fetch found!"));
          try {
            C(u(u({}, i2), { url: e2, type: "text" }), function(e3) {
              return t2(j(e3));
            });
          } catch (e3) {
            n2(e3);
          }
        });
      }
      var b, O, w, R, t, B = ["application/xhtml+xml", "application/xml", "application/pdf", "application/pkcs12", "application/javascript", "application/ecmascript", "application/vnd.mspowerpoint", "application/vnd.apple.mpegurl", "application/ogg", "text/css", "text/javascript", "image", "audio", "video"], M = /\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|)$/gi, x = ["ret", "retcode", "code", "errcode"], r = function() {
        var n2 = /* @__PURE__ */ new WeakSet();
        return function(e2, t2) {
          if (t2 instanceof Error)
            return "Error.message: " + t2.message + " \n  Error.stack: " + t2.stack;
          if (typeof t2 == "object" && t2 !== null) {
            if (n2.has(t2))
              return "[Circular " + (e2 || "root") + "]";
            n2.add(t2);
          }
          return t2;
        };
      }, E = function(e2) {
        if (typeof e2 == "string")
          return e2;
        try {
          return e2 instanceof Error ? (JSON.stringify(e2, r(), 4) || "undefined").replace(/"/gim, "") : JSON.stringify(e2, r(), 4) || "undefined";
        } catch (e3) {
          return "error happen when aegis stringify: \n " + e3.message + " \n " + e3.stack;
        }
      }, P = function(r2, s2) {
        s2 === void 0 && (s2 = 3);
        var o2, l2, a2, c2 = "";
        return Array.isArray(r2) ? (c2 += "[", o2 = r2.length, r2.forEach(function(e2, t2) {
          var n2, i2;
          c2 = (c2 += typeof e2 == "object" && 1 < s2 ? P(e2, s2 - 1) : (i2 = "", i2 += (n2 = typeof (e2 = e2)) == "undefined" || n2 == "symbol" || n2 == "function" ? "null" : n2 == "string" || n2 == "object" ? '"' + e2 + '"' : e2)) + (t2 === o2 - 1 ? "" : ",");
        }), c2 += "]") : r2 instanceof Object ? (c2 = "{", l2 = Object.keys(r2), a2 = l2.length, l2.forEach(function(e2, t2) {
          var n2, i2, o3;
          typeof r2[e2] == "object" && 1 < s2 ? c2 += '"' + e2 + '":' + P(r2[e2], s2 - 1) : c2 += (n2 = r2[e2 = e2], o3 = "", (i2 = typeof n2) == "string" || i2 == "object" ? o3 += '"' + e2 + '":"' + n2 + '"' : typeof n2 == "function" ? o3 += '"' + e2 + '":"function ' + n2.name + '"' : typeof n2 == "symbol" ? o3 += '"' + e2 + '":"symbol"' : typeof n2 != "number" && i2 != "boolean" || (o3 += '"' + e2 + '": ' + n2), o3), c2 += t2 === a2 - 1 || t2 < a2 - 1 && r2[l2[t2 + 1]] === void 0 ? "" : ",";
        }), c2 += "}") : c2 += r2, c2;
      }, G = ((L = b = b || {}).INFO_ALL = "-1", L.API_RESPONSE = "1", L.INFO = "2", L.ERROR = "4", L.PROMISE_ERROR = "8", L.AJAX_ERROR = "16", L.SCRIPT_ERROR = "32", L.IMAGE_ERROR = "64", L.CSS_ERROR = "128", L.CONSOLE_ERROR = "256", L.MEDIA_ERROR = "512", L.RET_ERROR = "1024", L.REPORT = "2048", L.PV = "4096", L.EVENT = "8192", L.PAGE_NOT_FOUND_ERROR = "16384", L.WEBSOCKET_ERROR = "32768", L.BRIDGE_ERROR = "65536", (L = O = O || {}).LOG = "log", L.SPEED = "speed", L.PERFORMANCE = "performance", L.OFFLINE = "offline", L.WHITE_LIST = "whiteList", L.VITALS = "vitals", L.PV = "pv", L.CUSTOM_PV = "customPV", L.EVENT = "event", L.CUSTOM = "custom", L.SDK_ERROR = "sdkError", L.SET_DATA = "setData", L.LOAD_PACKAGE = "loadPackage", (L = w = w || {}).production = "production", L.development = "development", L.gray = "gray", L.pre = "pre", L.daily = "daily", L.local = "local", L.test = "test", L.others = "others", function(e2) {
        return e2.filter(function(n2, i2) {
          return n2.type !== "static" || !e2.find(function(e3, t2) {
            return n2.url === e3.url && n2.status === 200 && i2 < t2;
          });
        });
      }), J = function(e2) {
        e2.level === b.INFO_ALL && (e2.level = b.INFO);
      }, V = function(e2) {
        return (Array.isArray(e2) ? e2 : [e2]).map(function(n2) {
          return Object.getOwnPropertyNames(n2).reduce(function(e3, t2) {
            return t2 !== "ctx" && (e3[t2] = n2[t2]), e3;
          }, { level: b.INFO, msg: "" });
        });
      }, W = function(i2) {
        return function(e2) {
          return i2.sendPipeline([function(e3, n2) {
            return n2({ url: i2.config.url || "", data: k(V(e3)), method: "post", contentType: "application/json", type: O.LOG, log: e3, requestConfig: { timeout: 5e3 }, success: function() {
              var t2 = i2.config.onReport;
              typeof t2 == "function" && e3.forEach(function(e4) {
                t2(e4);
              }), typeof n2 == "function" && n2([]);
            }, fail: function(e4) {
              e4 === "403 forbidden" && i2.destroy();
            } });
          }], O.LOG)(e2);
        };
      }, K = function() {
      }, L = (Object.defineProperty(N.prototype, "__version__", { get: function() {
        return console.warn("__version__ has discard, please use version"), "1.36.2";
      }, enumerable: false, configurable: true }), Object.defineProperty(N.prototype, "LogType", { get: function() {
        return console.warn("LogType has discard, please use logType"), b;
      }, enumerable: false, configurable: true }), N.prototype.init = function(e2) {
        this.setConfig(e2);
        for (var t2 = 0; t2 < N.installedPlugins.length; t2++)
          try {
            N.installedPlugins[t2].patch(this);
          } catch (e3) {
            this.sendSDKError(e3);
          }
        this.lifeCycle.emit("onInited");
      }, N.prototype.setConfig = function(e2) {
        Object.assign(this.config, e2);
        var e2 = this.config, t2 = e2.id, n2 = e2.uin, i2 = e2.version, o2 = e2.ext1, r2 = e2.ext2, s2 = e2.ext3, l2 = e2.aid, a2 = e2.env, c2 = a2 === void 0 ? "production" : a2, a2 = e2.pageUrl, e2 = this.bean.id !== t2 || this.bean.uin !== n2 || this.bean.aid !== l2;
        return this.bean.id = t2 || "", this.bean.uin = n2 || "", this.bean.version = i2 || "1.36.2", this.bean.aid = l2 || "", this.bean.env = function() {
          switch (c2) {
            case w.production:
            case w.development:
            case w.gray:
            case w.pre:
            case w.daily:
            case w.local:
            case w.test:
            case w.others:
              return 1;
            default:
              return;
          }
        }() ? c2 : w.others, a2 && this.extendBean("from", encodeURIComponent(a2)), o2 && this.extendBean("ext1", encodeURIComponent(o2)), r2 && this.extendBean("ext2", encodeURIComponent(r2)), s2 && this.extendBean("ext3", encodeURIComponent(s2)), e2 && this.lifeCycle.emit("onConfigChange", this.config), this.config;
      }, N.use = function(e2) {
        N.installedPlugins.indexOf(e2) === -1 && e2.aegisPlugin && N.installedPlugins.push(e2);
      }, N.unuse = function(e2) {
        e2 = N.installedPlugins.indexOf(e2);
        e2 !== -1 && N.installedPlugins.splice(e2, 1);
      }, N.prototype.info = function() {
        for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
          e2[t2] = arguments[t2];
        var n2 = { level: b.INFO, msg: e2 };
        e2.length === 1 && e2[0].msg && Object.assign(n2, u({}, e2[0]), { level: b.INFO }), this.normalLogPipeline(n2);
      }, N.prototype.infoAll = function() {
        for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
          e2[t2] = arguments[t2];
        var n2 = { level: b.INFO_ALL, msg: e2 };
        e2.length === 1 && e2[0].msg && Object.assign(n2, u({}, e2[0]), { level: b.INFO_ALL }), this.normalLogPipeline(n2);
      }, N.prototype.report = function() {
        for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
          e2[t2] = arguments[t2];
        var n2 = { level: b.REPORT, msg: e2 };
        e2.length === 1 && e2[0].msg && Object.assign(n2, u({}, e2[0])), this.normalLogPipeline(n2);
      }, N.prototype.error = function() {
        for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
          e2[t2] = arguments[t2];
        var n2 = { level: b.ERROR, msg: e2 };
        e2.length === 1 && e2[0].msg && Object.assign(n2, u({}, e2[0]), { level: b.ERROR }), this.normalLogPipeline(n2);
      }, N.prototype.speedLogPipeline = function(e2) {
        throw new Error('You need to override "speedLogPipeline" method');
      }, N.prototype.reportPv = function(n2) {
        var i2, o2 = this;
        n2 && (console.warn("reportPv is deprecated, please use reportEvent"), i2 = "" + Object.getOwnPropertyNames(this.bean).filter(function(e2) {
          return e2 !== "id";
        }).map(function(e2) {
          return e2 + "=" + o2.bean[e2];
        }).join("&"), this.sendPipeline([function(e2, t2) {
          t2({ url: o2.config.url + "/" + n2 + "?" + i2, addBean: false, type: O.CUSTOM_PV, fail: function(e3) {
            e3 === "403 forbidden" && o2.destroy();
          } });
        }], O.CUSTOM_PV)(null));
      }, N.prototype.reportEvent = function(e2) {
        e2 && ((e2 = typeof e2 == "string" ? { name: e2, ext1: this.config.ext1 || "", ext2: this.config.ext2 || "", ext3: this.config.ext3 || "" } : e2).name ? this.eventPipeline(e2) : console.warn("reportEvent params error"));
      }, N.prototype.reportTime = function(e2, t2) {
        if (typeof e2 == "object")
          return this.reportT(e2);
        typeof e2 == "string" ? typeof t2 == "number" ? t2 < 0 || 6e4 < t2 ? console.warn("reportTime: duration must between 0 and 60000") : this.submitCustomTime(e2, t2) : console.warn("reportTime: second param must be number") : console.warn("reportTime: first param must be a string");
      }, N.prototype.reportT = function(e2) {
        var t2 = e2.name, n2 = e2.duration, i2 = e2.ext1, i2 = i2 === void 0 ? "" : i2, o2 = e2.ext2, o2 = o2 === void 0 ? "" : o2, r2 = e2.ext3, r2 = r2 === void 0 ? "" : r2, e2 = e2.from;
        if (typeof t2 == "string" && typeof n2 == "number" && typeof i2 == "string" && typeof o2 == "string" && typeof r2 == "string") {
          if (!(n2 < 0 || 6e4 < n2))
            return this.submitCustomTime(t2, n2, i2, o2, r2, e2 === void 0 ? "" : e2);
          console.warn("reportTime: duration must between 0 and 60000");
        } else
          console.warn("reportTime: params error");
      }, N.prototype.time = function(e2) {
        typeof e2 == "string" ? this.timeMap[e2] ? console.warn("Timer " + e2 + " already exists") : this.timeMap[e2] = Date.now() : console.warn("time: first param must be a string");
      }, N.prototype.timeEnd = function(e2) {
        typeof e2 == "string" ? this.timeMap[e2] ? (this.submitCustomTime(e2, Date.now() - this.timeMap[e2]), delete this.timeMap[e2]) : console.warn("Timer " + e2 + " does not exist") : console.warn("timeEnd: first param must be a string");
      }, N.prototype.submitCustomTime = function(e2, t2, n2, i2, o2, r2) {
        this.customTimePipeline({ name: e2, duration: t2, ext1: n2 || this.config.ext1, ext2: i2 || this.config.ext2, ext3: o2 || this.config.ext3, from: r2 || void 0 });
      }, N.prototype.extendBean = function(e2, t2) {
        this.bean[e2] = t2;
      }, N.prototype.sendPipeline = function(e2, t2) {
        var n2, r2 = this;
        return v(l([function(e3, t3) {
          if (typeof n2.config.random != "number" && (console.warn("random must in [0, 1], default is 1."), n2.config.random = 1), !n2.isHidden || !n2.isGetSample)
            if (n2.isGetSample)
              n2.isHidden || t3(e3);
            else {
              if (n2.isGetSample = true, Math.random() < n2.config.random)
                return n2.isHidden = false, t3(e3);
              n2.isHidden = true;
            }
        }, F(n2 = this, t2)], e2, [a(this), function(i2, o2) {
          r2.request(i2, function() {
            for (var e3, t3 = [], n3 = 0; n3 < arguments.length; n3++)
              t3[n3] = arguments[n3];
            r2.failRequestCount = 0, o2({ isErr: false, result: t3, logType: i2 == null ? void 0 : i2.type, logs: i2 == null ? void 0 : i2.log }), (e3 = i2 == null ? void 0 : i2.success) != null && e3.call.apply(e3, l([i2], t3));
          }, function() {
            for (var e3, t3 = [], n3 = 0; n3 < arguments.length; n3++)
              t3[n3] = arguments[n3];
            10 <= ++r2.failRequestCount && r2.destroy(), o2({ isErr: true, result: t3, logType: i2 == null ? void 0 : i2.type, logs: i2 == null ? void 0 : i2.log }), (e3 = i2 == null ? void 0 : i2.fail) != null && e3.call.apply(e3, l([i2], t3));
          });
        }, c(this)]));
      }, N.prototype.send = function(e2, o2, r2) {
        var t2 = this;
        return v([a(this), function(n2, i2) {
          t2.request(n2, function() {
            for (var e3 = [], t3 = 0; t3 < arguments.length; t3++)
              e3[t3] = arguments[t3];
            i2({ isErr: false, result: e3, logType: n2.type, logs: n2.log }), o2 != null && o2.apply(void 0, e3);
          }, function() {
            for (var e3 = [], t3 = 0; t3 < arguments.length; t3++)
              e3[t3] = arguments[t3];
            i2({ isErr: true, result: e3, logType: n2.type, logs: n2.log }), r2 != null && r2.apply(void 0, e3);
          });
        }, c(this)])(e2);
      }, N.prototype.ready = function(e2, t2, n2) {
        throw new Error('You need to override "ready" method');
      }, N.prototype.request = function(e2, t2, n2) {
        throw new Error('You need to override "request" method');
      }, N.prototype.sendSDKError = function(e2) {
        var n2 = this;
        this.sendPipeline([function(e3, t2) {
          t2({ url: n2.config.url + "?id=1085&msg[0]=" + encodeURIComponent(E(e3)) + "&level[0]=2&from=" + n2.config.id + "&count=1&version=" + n2.config.id + "(1.36.2)", addBean: false, method: "get", type: O.SDK_ERROR, log: e3 });
        }], O.SDK_ERROR)(e2);
      }, N.prototype.destroy = function(e2) {
        e2 === void 0 && (e2 = false);
        var t2, n2, i2 = N.instances.indexOf(this);
        i2 !== -1 && N.instances.splice(i2, 1);
        for (var o2 = N.installedPlugins.length - 1; 0 <= o2; o2--)
          try {
            N.installedPlugins[o2].unpatch(this);
          } catch (e3) {
            this.sendSDKError(e3);
          }
        if (this.lifeCycle.emit("destroy"), this.lifeCycle.clear(), e2)
          t2 = this, n2 = Object.getOwnPropertyDescriptors(t2), Object.keys(n2).forEach(function(e3) {
            n2[e3].writable && (t2[e3] = null);
          }), Object.setPrototypeOf(this, null);
        else {
          for (var r2 = this; r2.constructor !== Object && g(r2, this), r2 = Object.getPrototypeOf(r2); )
            ;
          N.instances.length === 0 && (i2 = Object.getPrototypeOf(this).constructor, g(i2), g(N));
        }
      }, N.version = "1.36.2", N.instances = [], N.logType = b, N.environment = w, N.installedPlugins = [], N), T = (_.prototype.patch = function(e2) {
        this.canUse(e2) && this.exist(e2) && (this.instances.push(e2), this.triggerInit(e2), this.triggerOnNewAegis(e2));
      }, _.prototype.unpatch = function(e2) {
        e2 = this.instances.indexOf(e2);
        e2 !== -1 && (this.instances.splice(e2, 1), this.instances.length === 0 && this.uninstall());
      }, _.prototype.countInstance = function() {
        return this.instances.length;
      }, _.prototype.uninstall = function() {
        var e2;
        (e2 = (e2 = this.option) == null ? void 0 : e2.destroy) != null && e2.apply(this);
      }, _.prototype.walk = function(n2) {
        var i2 = this;
        this.instances.forEach(function(e2) {
          var t2 = i2.canUse(e2);
          t2 && n2(e2, t2);
        });
      }, _.prototype.canUse = function(e2) {
        e2 = this.getConfig(e2);
        return !(!e2 || typeof e2 != "object") || !!e2;
      }, _.prototype.getConfig = function(e2) {
        return (e2 = e2.config) == null ? void 0 : e2[this.name];
      }, _.prototype.exist = function(e2) {
        return this.instances.indexOf(e2) === -1;
      }, _.prototype.triggerInit = function(e2) {
        var t2;
        this.inited || (this.inited = true, (t2 = (t2 = this.option) == null ? void 0 : t2.init) != null && t2.call(this.option, this.getConfig(e2)));
      }, _.prototype.triggerOnNewAegis = function(e2) {
        var t2;
        (t2 = (t2 = this.option) == null ? void 0 : t2.onNewAegis) != null && t2.call(this.option, e2, this.getConfig(e2));
      }, _), $ = new T({ name: "offlineLog", onNewAegis: function(t2) {
        o(t2), t2.lifeCycle.on("onConfigChange", function(e2) {
          o(t2);
        });
      } }), S = typeof weex != "undefined" && (weex === null || weex === void 0 ? void 0 : weex.requireModule("stream")), C = S == null ? void 0 : S.fetch, j = function(e2) {
        var t2 = e2.ok, n2 = e2.status, i2 = e2.statusText, o2 = e2.data, r2 = e2.headers;
        return { ok: t2, status: n2, statusText: i2, body: o2, headers: r2, clone: function() {
          return j(e2);
        }, text: function() {
          return new Promise(function(e3) {
            return e3(o2);
          });
        }, json: function() {
          return new Promise(function(e3, t3) {
            try {
              e3(JSON.parse(o2));
            } catch (e4) {
              t3(new Error("response body is not JSON"));
            }
          });
        } };
      }, A = [], U = {}, X = weex, L = (n(t = I, S = R = L), t.prototype = S === null ? Object.create(S) : (Y.prototype = S.prototype, new Y()), I.prototype.getPlatform = function() {
        var e2 = (((e2 = (e2 = (e2 = this.weex) == null ? void 0 : e2.config) == null ? void 0 : e2.env) == null ? void 0 : e2.osName) || "").toLowerCase();
        return e2 === "android" ? 1 : e2 === "ios" ? 2 : 100;
      }, I.prototype.initOfflineLog = function() {
        I.use($);
      }, Object.defineProperty(I.prototype, "getBean", { get: function() {
        var t2 = this;
        return Object.getOwnPropertyNames(this.bean).map(function(e2) {
          return e2 + "=" + t2.bean[e2];
        }).join("&");
      }, enumerable: false, configurable: true }), I.prototype.reportSpeed = function(e2) {
        var t2, n2, i2, o2, r2;
        this.send({ url: "" + this.config.speedUrl, method: "post", data: (t2 = e2, n2 = this.bean, o2 = { fetch: [], static: [], bridge: [] }, r2 = {}, Array.isArray(t2) ? t2.forEach(function(e3) {
          var t3;
          (t3 = o2[e3.type]) != null && t3.push(e3);
        }) : (i2 = o2[t2.type]) != null && i2.push(t2), r2.payload = JSON.stringify(u({ duration: o2 }, n2)), r2), contentType: "application/json", type: O.SPEED, log: e2 });
      }, I.prototype.retcode = function(e2) {
        var t2 = this;
        typeof e2 == "object" ? e2.url ? 400 <= Object.keys(U).length || (U[e2.url] || (U[e2.url] = 0), U[e2.url] += 1, 3 < U[e2.url]) || (e2 = Object.assign({}, { url: "", isHttps: true, method: "GET", type: "fetch", duration: 0, ret: 0, status: 200 }, e2), A.push(e2), A.length === 1 && setTimeout(function() {
          t2.reportSpeed(A), A = [];
        }, 1e3)) : console.error("param url can not be empty!") : console.error("retcode params should be an objcet");
      }, I.prototype.uploadLogs = function(e2, t2) {
        this.lifeCycle.emit("uploadLogs", e2 = e2 === void 0 ? {} : e2, t2 = t2 === void 0 ? {} : t2);
      }, I.prototype.getOfflineLog = function() {
      }, I.prototype.uploadOfflineLogs = function(e2) {
      }, I.sessionID = "session-" + Date.now(), I), S = new T({ name: "aid", onNewAegis: function(t2) {
        var e2, n2 = this;
        this.aid && this.aid !== true ? (t2.bean.aid = this.aid, t2.config.aid = this.aid) : e2 = setTimeout(function() {
          n2.getAid(function(e3) {
            n2.aid = e3, t2.bean.aid = n2.aid, t2.config.aid = n2.aid;
          }), clearTimeout(e2);
        }, 0);
      }, getAid: function(n2) {
        return s(this, void 0, void 0, function() {
          var t2;
          return f(this, function(e2) {
            switch (e2.label) {
              case 0:
                return e2.trys.push([0, 2, , 3]), [4, localStorage.getItem("AEGIS_ID")];
              case 1:
                return (t2 = e2.sent()) || (t2 = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(e3) {
                  var t3 = 16 * Math.random() | 0;
                  return (e3 === "x" ? t3 : 3 & t3 | 8).toString(16);
                }), localStorage.setItem("AEGIS_ID", t2)), n2 != null && n2(t2 || ""), [3, 3];
              case 2:
                return e2.sent(), n2 != null && n2(""), [3, 3];
              case 3:
                return [2];
            }
          });
        });
      } }), z = new T({ name: "onError", listening: false, init: function() {
        this.startListen();
      }, startListen: function() {
        var t2 = this;
        if (!this.listening) {
          this.listening = true;
          try {
            var n2, e2 = Vue;
            e2 !== void 0 && e2 && (n2 = e2.config.errorHandler, e2.config.errorHandler = function(e3) {
              e3 && t2.publishErrorLog({ msg: e3, level: b.ERROR }), typeof n2 == "function" && n2(e3);
            });
          } catch (t3) {
            this.publishErrorLog({ msg: t3, level: b.ERROR });
          }
        }
      }, publishErrorLog: function(t2) {
        this.$walk(function(e2) {
          e2.normalLogPipeline(t2);
        });
      } }), T = new T({ name: "reportApiSpeed", override: false, fetch: null, weexFetch: null, onNewAegis: function(e2) {
        var t2, n2;
        this.override || (this.override = true, this.fetch = e2.fetch, this.weexFetch = e2.weexFetch, t2 = (n2 = this.overrideFetch(e2.config)).fetch, n2 = n2.weexFetch, e2.fetch = t2, e2.weexFetch = n2);
      }, publishSpeed: function(t2) {
        this.$walk(function(e2) {
          e2.speedLogPipeline(t2);
        });
      }, publishNormalLog: function(t2) {
        this.$walk(function(e2) {
          e2.normalLogPipeline(t2);
        });
      }, overrideFetch: function(u2) {
        var e2, t2, l2, n2, f2 = this;
        if (typeof this.fetch == "function")
          return e2 = this.fetch, t2 = this.weexFetch, l2 = function(r2, s2, l3, a2) {
            var c2, e3, t3, n3;
            u2.hostUrl && -1 < l3.indexOf(u2.hostUrl) || (c2 = { url: l3, isHttps: d(l3), method: (a2 == null ? void 0 : a2.method) || "get", duration: s2, nextHopProtocol: "", type: "fetch", status: r2.status }, (e3 = typeof ((n3 = u2.api) == null ? void 0 : n3.resourceTypeHandler) == "function" ? (n3 = u2.api) == null ? void 0 : n3.resourceTypeHandler(r2.url) : e3) !== "fetch" && e3 !== "static" && (n3 = r2.headers && r2.headers.get("content-type") || "", e3 = r2.ok && ((t3 = n3) === void 0 && (t3 = ""), n3 = (l3 === void 0 ? "" : l3).split("?")[0], M.test(n3) || B.some(function(e4) {
              return String(t3).indexOf(e4) !== -1;
            })) ? "static" : "fetch"), e3 === "fetch" ? r2.clone().text().then(function(e4) {
              var t4 = function(e5, t5, n5) {
                var i3, o3;
                try {
                  if (typeof (t5 == null ? void 0 : t5.retCodeHandler) == "function")
                    return { code: (r3 = (o3 = t5.retCodeHandler(e5, n5 == null ? void 0 : n5.url, n5 == null ? void 0 : n5.ctx, n5 == null ? void 0 : n5.payload) || {}).code) === void 0 ? "unknown" : r3, isErr: o3.isErr };
                  typeof e5 == "string" && (e5 = JSON.parse(e5)), typeof ((i3 = t5 == null ? void 0 : t5.ret) == null ? void 0 : i3.join) == "function" && (x = [].concat(t5.ret.map(function(e6) {
                    return e6.toLowerCase();
                  })));
                  var r3, s3 = Object.getOwnPropertyNames(e5).filter(function(e6) {
                    return x.indexOf(e6.toLowerCase()) !== -1;
                  });
                  return s3.length ? { code: "" + (r3 = e5[s3[0]]), isErr: r3 !== 0 && r3 !== "0" } : { code: "unknown", isErr: false };
                } catch (e6) {
                  return { code: "unknown", isErr: false };
                }
              }(e4, u2.api, { url: r2.url, ctx: r2, payload: a2 == null ? void 0 : a2.body }) || {}, n4 = t4.code, t4 = t4.isErr, i2 = (i2 = u2.api) == null ? void 0 : i2.apiDetail, o2 = i2 ? h(a2 == null ? void 0 : a2.body, (o2 = u2.api) == null ? void 0 : o2.reqParamHandler, { url: l3 }) : "", e4 = i2 ? h(e4, (i2 = u2.api) == null ? void 0 : i2.resBodyHandler, { url: l3 }) : "", i2 = "req url: " + l3 + " \n                              \nres status: " + (r2.status || 0) + "\n                              \nres duration: " + s2 + "ms \n                              \nreq method: " + ((a2 == null ? void 0 : a2.method) || "get") + " \n                              \nreq param: " + o2 + " \n                              \nres retcode: " + n4 + "\n                              \nres data: " + e4;
              f2.publishNormalLog({ msg: i2, level: b.API_RESPONSE }), c2.payload = a2 == null ? void 0 : a2.body, c2.ret = n4, c2.isErr = +t4, t4 && f2.publishNormalLog({ msg: i2, level: b.RET_ERROR });
            }) : Object.assign(c2, { type: "static", urlQuery: (n3 = r2.url, e3 = true, typeof n3 == "string" ? n3.split("?")[e3 ? 1 : 0] || "" : n3), domainLookup: i.number, connectTime: i.number }), f2.publishSpeed(c2));
          }, n2 = function(e3, t3, n3, i2) {
            var o2;
            throw u2.hostUrl && -1 < n3.indexOf(u2.hostUrl) || (o2 = { url: n3, isHttps: d(n3), method: (i2 == null ? void 0 : i2.method) || "get", duration: t3, nextHopProtocol: "", type: "fetch", status: 0 }, f2.publishSpeed(o2), o2 = (o2 = u2.api) != null && o2.apiDetail ? h(i2 == null ? void 0 : i2.body, (o2 = u2.api) == null ? void 0 : o2.reqParamHandler, { url: n3 }) : "", n3 = "AJAX_ERROR: " + e3 + "\n              \nreq url: " + n3 + "\n              \nres status: 0\n              \nres duration: " + t3 + "ms\n              \nreq method: " + ((i2 == null ? void 0 : i2.method) || "get") + "\n              \nreq param: " + o2, f2.publishNormalLog({ msg: n3, level: b.AJAX_ERROR })), e3;
          }, { fetch: function(i2, o2) {
            var r2 = Date.now();
            return e2(i2, o2).then(function(e3) {
              var t3 = Date.now() - r2, n3 = e3;
              try {
                l2(n3, t3, i2, o2);
              } catch (e4) {
              }
              return e3;
            }).catch(function(e3) {
              var t3 = Date.now() - r2;
              try {
                n2(e3, t3, i2, o2);
              } catch (e4) {
              }
              throw e3;
            });
          }, weexFetch: function(i2, o2, e3) {
            var r2 = i2.url, s2 = Date.now();
            try {
              t2(i2, function(e4) {
                var t3 = Date.now() - s2, n3 = j(e4);
                try {
                  l2(n3, t3, r2, i2);
                } catch (e5) {
                }
                typeof o2 == "function" && o2(e4);
              }, e3);
            } catch (o3) {
              e3 = Date.now() - s2;
              try {
                n2(o3, e3, r2, i2);
              } catch (i3) {
              }
              throw o3;
            }
          } };
      } });
      function I(e2) {
        var t2, n2, o2, r2, l2 = R.call(this, e2) || this;
        l2.weex = X, l2.originRequest = y, l2.fetch = y, l2.weexFetch = C, l2.speedLogPipeline = v([(o2 = l2.config, r2 = {}, function(e3, t3) {
          var n3, i2;
          o2.speedSample ? (i2 = typeof o2.repeat == "object" ? o2.repeat : { repeat: o2.repeat }, n3 = +i2.speed || +i2.repeat || 5, Array.isArray(e3) ? (i2 = e3.filter(function(e4) {
            var t4 = !r2[e4.url] || r2[e4.url] < n3;
            return r2[e4.url] = 1 + ~~r2[e4.url], t4;
          })).length && t3(i2) : (!r2[e3.url] || r2[e3.url] < n3) && (r2[e3.url] = 1 + ~~r2[e3.url], t3(e3))) : t3(e3);
        }), m(l2), function(e3, t3) {
          l2.lifeCycle.emit("beforeReportSpeed", e3);
          var n3 = l2.config.beforeReportSpeed;
          if ((e3 = typeof n3 == "function" ? e3.filter(function(e4) {
            return n3(e4) !== false;
          }) : e3).length)
            return t3(e3);
        }, function(e3) {
          l2.reportSpeed(e3);
        }]), l2.request = function(i2, o3, r3) {
          var e3, t3, n3, s2;
          i2 && typeof i2.url == "string" && i2.url !== "" && l2.bean.id && (e3 = i2.url, i2.addBean !== false && (e3 = e3 + (e3.indexOf("?") === -1 ? "?" : "&") + l2.getBean), ((i2.method || "get").toLocaleLowerCase() === "get" ? l2.originRequest((t3 = e3, n3 = i2.data, typeof t3 != "string" ? "" : typeof n3 == "object" && n3 ? (s2 = Object.getOwnPropertyNames(n3).map(function(e4) {
            var t4 = n3[e4];
            return e4 + "=" + (typeof t4 == "string" ? encodeURIComponent(t4) : encodeURIComponent(JSON.stringify(t4)));
          }).join("&").replace(/eval/gi, "evaI"), t3 + (t3.indexOf("?") === -1 ? "?" : "&") + s2) : t3), u({ method: "GET", headers: {} }, i2.requestConfig)) : (typeof i2.data == "string" ? i2.data = i2.data.replace(/eval/gi, "evaI") : i2.data = JSON.stringify(i2.data), l2.originRequest(e3, u({ method: "POST", body: i2.data, headers: i2.contentType ? { "Content-Type": i2.contentType } : {} }, i2.requestConfig)))).then(function(e4) {
            var t4, n4;
            String(e4.status).match(/^20\d+/g) ? o3 != null && o3(e4) : r3 != null && r3(e4), (n4 = (t4 = l2.config).reqCallback) != null && n4.call(t4, e4, i2);
          }).catch(function(e4) {
            r3 != null && r3(e4);
          }));
        };
        try {
          e2.offlineLog && l2.initOfflineLog(), l2.init(e2), l2.extendBean("sessionId", I.sessionID), l2.extendBean("platform", l2.getPlatform()), l2.extendBean("from", encodeURIComponent(e2.pageUrl || ((n2 = (t2 = l2.weex) == null ? void 0 : t2.config) == null ? void 0 : n2.bundleUrl) || "")), l2.extendBean("referer", encodeURIComponent(e2.referrer || ""));
        } catch (e3) {
          console.warn(e3), console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact aegis-helper for feedback and thank you for your support.", "color: red"), l2.sendSDKError(e3);
        }
        return l2;
      }
      function Y() {
        this.constructor = t;
      }
      function _(e2) {
        this.aegisPlugin = true, this.name = "", this.instances = [], this.inited = false, e2.$walk = this.walk.bind(this), e2.$getConfig = this.getConfig.bind(this), this.option = e2, this.name = e2.name;
      }
      function N(e2) {
        var n2, t2, i2, o2, s2, r2, l2, a2, c2, u2, f2, p2, d2, h2, g2, y2 = this;
        this.isGetSample = false, this.isHidden = false, this.config = { version: 0, delay: 1e3, onError: true, repeat: 5, random: 1, aid: true, device: true, pagePerformance: true, webVitals: true, speedSample: true, onClose: true, hostUrl: "https://aegis.qq.com", websocketHack: false, env: "production", url: "", offlineUrl: "", whiteListUrl: "", pvUrl: "", speedUrl: "", customTimeUrl: "", performanceUrl: "", webVitalsUrl: "", eventUrl: "", setDataReportUrl: "", reportImmediately: true }, this.isWhiteList = false, this.lifeCycle = new D(), this.bean = {}, this.normalLogPipeline = v([m(this, 5), q, function(e3, t3) {
          var i3 = n2.config;
          t3(e3 = e3.map(function(e4) {
            var t4, n3 = i3.maxLength || 102400;
            try {
              if (!e4.msg || e4.msg.length <= n3)
                return e4;
              e4.msg = (t4 = e4.msg) == null ? void 0 : t4.substring(0, n3);
            } catch (t5) {
              e4.msg = E(e4.msg).substring(0, i3.maxLength);
            }
            return e4;
          }));
        }, (h2 = (n2 = this).config, g2 = {}, function(e3, t3) {
          var n3 = typeof h2.repeat == "number" ? h2.repeat : 5;
          if (n3 === 0)
            return t3(e3);
          t3(e3.filter(function(e4) {
            return e4.level !== b.ERROR && e4.level !== b.PROMISE_ERROR && e4.level !== b.AJAX_ERROR && e4.level !== b.SCRIPT_ERROR && e4.level !== b.IMAGE_ERROR && e4.level !== b.CSS_ERROR && e4.level !== b.MEDIA_ERROR || (g2[e4.msg] = g2[e4.msg] || 0, g2[e4.msg] += 1, !(g2[e4.msg] > n3));
          }));
        }), (p2 = this.lifeCycle.emit, d2 = this.config, function(e3, t3) {
          var n3, i3 = d2.logCreated;
          return typeof i3 == "function" ? (n3 = e3.filter(function(e4) {
            return i3(e4) !== false;
          }), p2("beforeWrite", n3), t3(n3)) : (p2("beforeWrite", e3), t3(e3));
        }), (f2 = this, setTimeout(function() {
          var e3 = f2.config.pvUrl, n3 = e3 === void 0 ? "" : e3;
          n3 && f2.sendPipeline([function(e4, t3) {
            t3({ url: n3, type: O.PV, fail: function(e5) {
              e5 === "403 forbidden" && f2.destroy();
            } });
          }], O.PV)(null);
        }, 100), function(e3, t3) {
          t3(e3);
        }), (c2 = a2 = l2 = false, u2 = [], (s2 = this).lifeCycle.on("onConfigChange", function() {
          r2 && clearTimeout(r2), r2 = setTimeout(function() {
            var e3, n3;
            !c2 && s2.config && (c2 = true, e3 = s2.config.whiteListUrl, (n3 = e3 === void 0 ? "" : e3) && s2.sendPipeline([function(e4, t3) {
              t3({ url: n3, type: O.WHITE_LIST, success: function(e5) {
                a2 = true;
                try {
                  var t4 = e5.data || JSON.parse(e5), n4 = t4.retcode, i3 = t4.result, o3 = i3 === void 0 ? {} : i3;
                  if (n4 === 0) {
                    if (l2 = o3.is_in_white_list, s2.isWhiteList = l2, o3.shutdown)
                      return void s2.destroy();
                    0 <= o3.rate && o3.rate <= 1 && (s2.config.random = o3.rate, s2.isGetSample = false);
                  }
                  s2.isWhiteList && u2.length ? W(s2)(u2.splice(0), function() {
                  }) : !s2.isWhiteList && u2.length && (u2.length = 0);
                  var r3 = s2.config.onWhitelist;
                  typeof r3 == "function" && r3(l2);
                } catch (e6) {
                }
              }, fail: function(e5) {
                e5 === "403 forbidden" && s2.destroy(), a2 = true;
              } });
            }], O.WHITE_LIST)(null), c2 = false);
          }, s2.config.uin ? 50 : 500);
        }), s2.lifeCycle.on("destroy", function() {
          u2.length = 0;
        }), function(e3, t3) {
          var n3;
          l2 || (n3 = (n3 = s2.config) == null ? void 0 : n3.api) != null && n3.reportRequest ? t3(e3.concat(u2.splice(0)).map(function(e4) {
            return J(e4), e4;
          })) : (n3 = e3.filter(function(e4) {
            return e4.level !== b.INFO && e4.level !== b.API_RESPONSE ? (J(e4), true) : (a2 || (u2.push(e4), 200 <= u2.length && (u2.length = 200)), false);
          })).length && t3(n3);
        }), function(e3, t3) {
          try {
            var n3 = JSON.parse(JSON.stringify(e3)), i3 = (y2.lifeCycle.emit("beforeReport", n3), y2.config.beforeReport);
            (e3 = typeof i3 == "function" ? e3.filter(function(e4) {
              return i3(e4) !== false;
            }) : e3).length && t3(e3);
          } catch (e4) {
          }
        }, W(this)]), this.eventPipeline = v([m(this, 10), (o2 = this, function(e3) {
          o2.sendPipeline([function(e4, t3) {
            var n3 = e4.map(function(e5) {
              return { name: e5.name, ext1: e5.ext1 || o2.config.ext1 || "", ext2: e5.ext2 || o2.config.ext2 || "", ext3: e5.ext3 || o2.config.ext3 || "" };
            });
            t3({ url: o2.config.eventUrl + "?payload=" + encodeURIComponent(JSON.stringify(n3)), type: O.EVENT, log: e4, fail: function(e5) {
              e5 === "403 forbidden" && o2.destroy();
            } });
          }], O.EVENT)(e3);
        })]), this.timeMap = {}, this.failRequestCount = 0, this.customTimePipeline = v([m(this, 10), (i2 = this, function(e3) {
          return i2.sendPipeline([function(e4, t3) {
            t3({ url: i2.config.customTimeUrl + "?payload=" + encodeURIComponent(JSON.stringify({ custom: e4 })), type: O.CUSTOM, log: e4, fail: function(e5) {
              e5 === "403 forbidden" && i2.destroy();
            } });
          }], O.CUSTOM)(e3);
        })]), this.config = (t2 = this.config, (e2 = e2.hostUrl) === void 0 && (e2 = "https://aegis.qq.com"), t2.url = t2.url || e2 + "/collect", t2.offlineUrl = t2.offlineUrl || e2 + "/offline", t2.whiteListUrl = t2.whiteListUrl || e2 + "/collect/whitelist", t2.pvUrl = t2.pvUrl || e2 + "/collect/pv", t2.eventUrl = t2.eventUrl || e2 + "/collect/events", t2.speedUrl = t2.speedUrl || e2 + "/speed", t2.customTimeUrl = t2.customTimeUrl || e2 + "/speed/custom", t2.performanceUrl = t2.performanceUrl || e2 + "/speed/performance", t2.webVitalsUrl = t2.webVitalsUrl || e2 + "/speed/webvitals", t2.setDataReportUrl = t2.SetDataReportUrl || e2 + "/speed/miniProgramData", t2), N.instances.push(this);
      }
      return L.use(z), L.use(T), L.use(S), L;
    });
  }
});

// dep:aegis-weex-sdk
init_define_process_env_UNI_STAT_TITLE_JSON();
init_define_process_env_UNI_STAT_UNI_CLOUD();
var aegis_weex_sdk_default = require_aegis_min();
export {
  aegis_weex_sdk_default as default
};
//# sourceMappingURL=aegis-weex-sdk.js.map
